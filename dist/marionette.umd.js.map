{"version":3,"file":"marionette.umd.js","sources":["../utils/proxy.js","../utils/extend.js","../version.js","../modules/common/normalize-methods.js","../utils/error.js","../modules/common/bind-events.js","../modules/common/bind-requests.js","../modules/common/get-option.js","../modules/common/merge-options.js","../modules/common/monitor-view-events.js","../modules/common/trigger-method.js","../utils/build-event-args.js","../utils/call-handler.js","../utils/once-wrap.js","../mixins/events.js","../utils/make-callback.js","../mixins/requests.js","../mixins/common.js","../mixins/destroy.js","../modules/radio.js","../mixins/radio.js","../modules/object.js","../mixins/behaviors.js","../mixins/delegate-entity-events.js","../mixins/template-render.js","../mixins/ui.js","../config/features.js","../config/event-delegator.js","../mixins/view-events.js","../config/dom.js","../mixins/view.js","../modules/common/view.js","../modules/region.js","../modules/common/build-region.js","../mixins/regions.js","../config/renderer.js","../modules/view.js","../modules/child-view-container.js","../modules/collection-view.js","../modules/behavior.js","../modules/application.js","../index.js"],"sourcesContent":["//Internal utility for creating context style global utils\nconst proxy = function(method) {\n  return function(context, ...args) {\n    return method.apply(context, args);\n  };\n};\n\nexport default proxy;\n","// Marionette.extend\n// -----------------\n\nimport { has, extend, create } from 'underscore';\n\n// Borrowed from backbone.js\nexport default function(protoProps, staticProps) {\n  const parent = this;\n  let child;\n\n  // The constructor function for the new subclass is either defined by you\n  // (the \"constructor\" property in your `extend` definition), or defaulted\n  // by us to simply call the parent constructor.\n  if (protoProps && has(protoProps, 'constructor')) {\n    child = protoProps.constructor;\n  } else {\n    child = function() { return parent.apply(this, arguments); };\n  }\n\n  // Add static properties to the constructor function, if supplied.\n  extend(child, parent, staticProps);\n\n  // Set the prototype chain to inherit from `parent`, without calling\n  // `parent`'s constructor function and add the prototype properties.\n  child.prototype = create(parent.prototype, protoProps);\n  child.prototype.constructor = child;\n\n  // Set a convenience property in case the parent's prototype is needed\n  // later.\n  child.__super__ = parent.prototype;\n\n  return child;\n}\n","var version = \"5.0.0-alpha.1\";\n\nexport { version };\n","import { reduce, isFunction } from 'underscore';\n\n// Marionette.normalizeMethods\n// ----------------------\n\n// Pass in a mapping of events => functions or function names\n// and return a mapping of events => functions\nconst normalizeMethods = function(hash) {\n  if (!hash) { return }\n\n  return reduce(hash, (normalizedHash, method, name) => {\n    if (!isFunction(method)) {\n      method = this[method];\n    }\n    if (method) {\n      normalizedHash[name] = method;\n    }\n    return normalizedHash;\n  }, {});\n};\n\nexport default normalizeMethods;\n","// Error\n// -----\n\nimport { extend as _extend, pick } from 'underscore';\nimport extend from './extend';\nimport {version} from '../version';\n\nconst errorProps = ['description', 'fileName', 'lineNumber', 'name', 'message', 'number', 'url'];\n\nconst MarionetteError = extend.call(Error, {\n  urlRoot: `http://marionettejs.com/docs/v${version}/`,\n\n  url: '',\n\n  constructor(options) {\n    const error = Error.call(this, options.message);\n    _extend(this, pick(error, errorProps), pick(options, errorProps));\n\n    if (Error.captureStackTrace) {\n      this.captureStackTrace();\n    }\n\n    this.url = this.urlRoot + this.url;\n  },\n\n  captureStackTrace() {\n    Error.captureStackTrace(this, MarionetteError);\n  },\n\n  toString() {\n    return `${ this.name }: ${ this.message } See: ${ this.url }`;\n  }\n});\n\nexport default MarionetteError;\n","// Bind Entity Events & Unbind Entity Events\n// -----------------------------------------\n//\n// These methods are used to bind/unbind a backbone \"entity\" (e.g. collection/model)\n// to methods on a target object.\n//\n// The first parameter, `target`, must have the Backbone.Events module mixed in.\n//\n// The second parameter is the `entity` (Backbone.Model, Backbone.Collection or\n// any object that has Backbone.Events mixed in) to bind the events from.\n//\n// The third parameter is a hash of { \"event:name\": \"eventHandler\" }\n// configuration. Multiple handlers can be separated by a space. A\n// function can be supplied instead of a string handler name.\n\nimport { isObject } from 'underscore';\nimport normalizeMethods from './normalize-methods';\nimport MarionetteError from '../../utils/error';\n\nfunction normalizeBindings(context, bindings) {\n  if (!isObject(bindings)) {\n    throw new MarionetteError({\n      message: 'Bindings must be an object.',\n      url: 'common.html#bindevents'\n    });\n  }\n\n  return normalizeMethods.call(context, bindings);\n}\n\nfunction bindEvents(entity, bindings) {\n  if (!entity || !bindings) { return this; }\n\n  this.listenTo(entity, normalizeBindings(this, bindings));\n\n  return this;\n}\n\nfunction unbindEvents(entity, bindings) {\n  if (!entity) { return this; }\n\n  if (!bindings) {\n    this.stopListening(entity);\n    return this;\n  }\n\n  this.stopListening(entity, normalizeBindings(this, bindings));\n\n  return this;\n}\n\n// Export Public API\nexport {\n  bindEvents,\n  unbindEvents\n};\n","// Bind/Unbind Radio Requests\n// -----------------------------------------\n//\n// These methods are used to bind/unbind a backbone.radio request\n// to methods on a target object.\n//\n// The first parameter, `target`, will set the context of the reply method\n//\n// The second parameter is the `Radio.channel` to bind the reply to.\n//\n// The third parameter is a hash of { \"request:name\": \"replyHandler\" }\n// configuration. A function can be supplied instead of a string handler name.\n\nimport { isObject } from 'underscore';\nimport normalizeMethods from './normalize-methods';\nimport MarionetteError from '../../utils/error';\n\nfunction normalizeBindings(context, bindings) {\n  if (!isObject(bindings)) {\n    throw new MarionetteError({\n      message: 'Bindings must be an object.',\n      url: 'common.html#bindrequests'\n    });\n  }\n\n  return normalizeMethods.call(context, bindings);\n}\n\nfunction bindRequests(channel, bindings) {\n  if (!channel || !bindings) { return this; }\n\n  channel.reply(normalizeBindings(this, bindings), this);\n\n  return this;\n}\n\nfunction unbindRequests(channel, bindings) {\n  if (!channel) { return this; }\n\n  if (!bindings) {\n    channel.stopReplying(null, null, this);\n    return this;\n  }\n\n  channel.stopReplying(normalizeBindings(this, bindings));\n\n  return this;\n}\n\nexport {\n  bindRequests,\n  unbindRequests\n};\n","// Marionette.getOption\n// --------------------\n\n// Retrieve an object, function or other value from the\n// object or its `options`, with `options` taking precedence.\nconst getOption = function(optionName) {\n  if (!optionName) { return; }\n  if (this.options && (this.options[optionName] !== undefined)) {\n    return this.options[optionName];\n  } else {\n    return this[optionName];\n  }\n};\n\nexport default getOption;\n","import { each } from 'underscore';\n\n// Merge `keys` from `options` onto `this`\nconst mergeOptions = function(options, keys) {\n  if (!options) { return; }\n\n  each(keys, (key) => {\n    const option = options[key];\n    if (option !== undefined) {\n      this[key] = option;\n    }\n  });\n};\n\nexport default mergeOptions;\n","// DOM Refresh\n// -----------\n\nimport { each } from 'underscore';\n\n// Trigger method on children unless a pure Backbone.View\nfunction triggerMethodChildren(view, event, shouldTrigger) {\n  if (!view._getImmediateChildren) { return; }\n  each(view._getImmediateChildren(), child => {\n    if (!shouldTrigger(child)) { return; }\n    child.triggerMethod(event, child);\n  });\n}\n\nfunction shouldTriggerAttach(view) {\n  return !view._isAttached;\n}\n\nfunction shouldAttach(view) {\n  if (!shouldTriggerAttach(view)) { return false; }\n  view._isAttached = true;\n  return true;\n}\n\nfunction shouldTriggerDetach(view) {\n  return view._isAttached;\n}\n\nfunction shouldDetach(view) {\n  view._isAttached = false;\n  return true;\n}\n\nfunction triggerDOMRefresh(view) {\n  if (view._isAttached && view._isRendered) {\n    view.triggerMethod('dom:refresh', view);\n  }\n}\n\nfunction triggerDOMRemove(view) {\n  if (view._isAttached && view._isRendered) {\n    view.triggerMethod('dom:remove', view);\n  }\n}\n\nfunction handleBeforeAttach() {\n  triggerMethodChildren(this, 'before:attach', shouldTriggerAttach);\n}\n\nfunction handleAttach() {\n  triggerMethodChildren(this, 'attach', shouldAttach);\n  triggerDOMRefresh(this);\n}\n\nfunction handleBeforeDetach() {\n  triggerMethodChildren(this, 'before:detach', shouldTriggerDetach);\n  triggerDOMRemove(this);\n}\n\nfunction handleDetach() {\n  triggerMethodChildren(this, 'detach', shouldDetach);\n}\n\nfunction handleBeforeRender() {\n  triggerDOMRemove(this);\n}\n\nfunction handleRender() {\n  triggerDOMRefresh(this);\n}\n\n// Monitor a view's state, propagating attach/detach events to children and firing dom:refresh\n// whenever a rendered view is attached or an attached view is rendered.\nfunction monitorViewEvents(view) {\n  if (view._areViewEventsMonitored || view.monitorViewEvents === false) { return; }\n\n  view._areViewEventsMonitored = true;\n\n  view.on({\n    'before:attach': handleBeforeAttach,\n    'attach': handleAttach,\n    'before:detach': handleBeforeDetach,\n    'detach': handleDetach,\n    'before:render': handleBeforeRender,\n    'render': handleRender\n  });\n}\n\nexport default monitorViewEvents;\n","// Trigger Method\n// --------------\n\nimport { isFunction } from 'underscore';\nimport getOption from './get-option';\n\n// split the event name on the \":\"\nconst splitter = /(^|:)(\\w)/gi;\n\n// Only calc getOnMethodName once\nconst methodCache = {};\n\n// take the event section (\"section1:section2:section3\")\n// and turn it in to uppercase name onSection1Section2Section3\nfunction getEventName(match, prefix, eventName) {\n  return eventName.toUpperCase();\n}\n\nconst getOnMethodName = function(event) {\n  if (!methodCache[event]) {\n    methodCache[event] = 'on' + event.replace(splitter, getEventName);\n  }\n\n  return methodCache[event];\n};\n\n// Trigger an event and/or a corresponding method name. Examples:\n//\n// `this.triggerMethod(\"foo\")` will trigger the \"foo\" event and\n// call the \"onFoo\" method.\n//\n// `this.triggerMethod(\"foo:bar\")` will trigger the \"foo:bar\" event and\n// call the \"onFooBar\" method.\nexport default function triggerMethod(event, ...args) {\n  // get the method name from the event name\n  const methodName = getOnMethodName(event);\n  const method = getOption.call(this, methodName);\n  let result;\n\n  // call the onMethodName if it exists\n  if (isFunction(method)) {\n    // pass all args, except the event name\n    result = method.apply(this, args);\n  }\n\n  // trigger the event\n  this.trigger.apply(this, arguments);\n\n  return result;\n}\n","import { reduce, keys } from 'underscore';\n\n// Regular expression used to split event strings.\nexport const eventSplitter = /\\s+/;\n\n// Iterates over the standard `event, callback` (as well as the fancy multiple\n// space-separated events `\"change blur\", callback` and jQuery-style event\n// maps `{event: callback}`).\nexport default function buildEventArgs(name, callback, context, listener) {\n  if (name && typeof name === 'object') {\n    return reduce(keys(name), (eventArgs, key) => {\n      return eventArgs.concat(buildEventArgs(key, name[key], context || callback, listener));\n    }, []);\n  }\n\n  if (name && eventSplitter.test(name)) {\n    return reduce(name.split(eventSplitter), (eventArgs, n) => {\n      eventArgs.push({ name: n, callback, context, listener });\n      return eventArgs;\n    }, []);\n  }\n\n  return [{ name, callback, context, listener }];\n}\n","// An optimized way to execute callbacks.\nexport default function callHandler(callback, context, args = []) {\n  switch (args.length) {\n    case 0: return callback.call(context);\n    case 1: return callback.call(context, args[0]);\n    case 2: return callback.call(context, args[0], args[1]);\n    case 3: return callback.call(context, args[0], args[1], args[2]);\n    default: return callback.apply(context, args);\n  }\n}\n","import { once } from 'underscore';\n\n// Wrap callback in a once. Returns for requests\n// `offCallback` unbinds the `onceWrapper` after it has been called.\nexport default function onceWrap(callback, offCallback) {\n  const onceCallback = once(function() {\n    offCallback(onceCallback);\n    return callback.apply(this, arguments);\n  });\n\n  onceCallback._callback = callback;\n\n  return onceCallback;\n}\n","import { reduce, each, keys, uniqueId } from 'underscore';\n\nimport buildEventArgs, { eventSplitter } from '../utils/build-event-args';\nimport callHandler from '../utils/call-handler';\nimport onceWrap from '../utils/once-wrap';\n\nimport triggerMethod from '../modules/common/trigger-method';\n\n// A module that can be mixed in to *any object* in order to provide it with\n// a custom event channel. You may bind a callback to an event with `on` or\n// remove with `off`; `trigger`-ing an event fires all callbacks in\n// succession.\n//\n//     var object = {};\n//     _.extend(object, Events);\n//     object.on('expand', function(){ alert('expanded'); });\n//     object.trigger('expand');\n//\n\n// The reducing API that adds a callback to the `events` object.\nconst onApi = function({ events, name, callback, context, ctx, listener }) {\n  const handlers = events[name] || (events[name] = []);\n  handlers.push({ callback, context, ctx: context || ctx, listener });\n  return events;\n};\n\nconst onReducer = function(events, { name, callback, context }) {\n  if (!callback) {return events;}\n  return onApi({ events, name, callback, context, ctx: this });\n}\n\nconst onceReducer = function(events, { name, callback, context }) {\n  if (!callback) {return events;}\n  const onceCallback = onceWrap(callback, this.off.bind(this, name));\n  return onApi({ events, name, callback: onceCallback, context, ctx: this });\n}\n\nconst cleanupListener = function({ obj, listeneeId, listenerId, listeningTo }) {\n  delete listeningTo[listeneeId];\n  delete obj._listeners[listenerId];\n};\n\n// The reducing API that removes a callback from the `events` object.\nconst offReducer = function(events , { name, callback, context }) {\n  const names = name ? [name] : keys(events);\n\n  each(names, key => {\n    const handlers = events[key];\n\n    // Bail out if there are no events stored.\n    if (!handlers) {return;}\n\n    // Find any remaining events.\n    events[key] = reduce(handlers, (remaining, handler) => {\n      if (\n        callback && callback !== handler.callback &&\n          callback !== handler.callback._callback ||\n            context && context !== handler.context\n      ) {\n        remaining.push(handler);\n        return remaining;\n      }\n\n      // If not including event, clean up any related listener\n      if (handler.listener) {\n        const listener = handler.listener;\n        listener.count--;\n        if (!listener.count) {cleanupListener(listener);}\n      }\n\n      return remaining;\n    }, []);\n\n    if (!events[key].length) {delete events[key];}\n  });\n\n  return events;\n};\n\nconst getListener = function(obj, listenerObj) {\n  const listeneeId = obj._listenId || (obj._listenId = uniqueId('l'));\n  obj._events = obj._events || {};\n  const listeningTo = listenerObj._listeningTo || (listenerObj._listeningTo = {});\n  const listener = listeningTo[listeneeId];\n\n  // This listenerObj is not listening to any other events on `obj` yet.\n  // Setup the necessary references to track the listening callbacks.\n  if (!listener) {\n    const listenerId = listenerObj._listenId || (listenerObj._listenId = uniqueId('l'));\n    listeningTo[listeneeId] = {obj, listeneeId, listenerId, listeningTo, count: 0};\n\n    return listeningTo[listeneeId];\n  }\n\n  return listener;\n}\n\nconst listenToApi = function({ name, callback, context, listener }) {\n  if (!callback) {return;}\n\n  const { obj, listenerId } = listener;\n  const listeners = obj._listeners || (obj._listeners = {});\n  obj._events = onApi({ events: obj._events, name, callback, context, listener });\n  listeners[listenerId] = listener;\n  listener.count++;\n\n  // Call `on` for interop\n  obj.on(name, callback, context, { _internal: true });\n};\n\nconst listenToOnceApi = function({ name, callback, context, listener }) {\n  if (!callback) {return;}\n  const offCallback = this.stopListening.bind(this, listener.obj, name);\n  const onceCallback = onceWrap(callback, offCallback);\n  listenToApi({ name, callback: onceCallback, context, listener });\n};\n\n// Handles triggering the appropriate event callbacks.\nconst triggerApi = function({ events, name, args }) {\n  const objEvents = events[name];\n  const allEvents = (objEvents && events.all) ? events.all.slice() : events.all;\n  if (objEvents) {triggerEvents(objEvents, args);}\n  if (allEvents) {triggerEvents(allEvents, [name].concat(args));}\n};\n\nconst triggerEvents = function(events, args) {\n  each(events, ({ callback, ctx }) => {\n    callHandler(callback, ctx, args);\n  });\n};\n\nexport default {\n\n  // Bind an event to a `callback` function. Passing `\"all\"` will bind\n  // the callback to all events fired.\n  on(name, callback, context, opts) {\n    if (opts && opts._internal) {return;}\n\n    const eventArgs = buildEventArgs(name, callback, context);\n    this._events = reduce(eventArgs, onReducer.bind(this), this._events || {});\n\n    return this;\n  },\n\n  // Remove one or many callbacks. If `context` is null, removes all\n  // callbacks with that function. If `callback` is null, removes all\n  // callbacks for the event. If `name` is null, removes all bound\n  // callbacks for all events.\n  off(name, callback, context, opts) {\n    if (!this._events) {return this;}\n    if (opts && opts._internal) {return;}\n\n    // Delete all event listeners and \"drop\" events.\n    if (!name && !context && !callback) {\n      this._events = void 0;\n      const listeners = this._listeners;\n      each(keys(listeners), listenerId => {\n        cleanupListener(listeners[listenerId]);\n      });\n      return this;\n    }\n\n    const eventArgs = buildEventArgs(name, callback, context);\n\n    this._events = reduce(eventArgs, offReducer, this._events);\n\n    return this;\n  },\n\n  // Bind an event to only be triggered a single time. After the first time\n  // the callback is invoked, its listener will be removed. If multiple events\n  // are passed in using the space-separated syntax, the handler will fire\n  // once for each event, not once for a combination of all events.\n  once(name, callback, context) {\n    const eventArgs = buildEventArgs(name, callback, context);\n\n    this._events = reduce(eventArgs, onceReducer.bind(this), this._events || {})\n\n    return this;\n  },\n\n  // Inversion-of-control versions of `on`. Tell *this* object to listen to\n  // an event in another object... keeping track of what it's listening to\n  // for easier unbinding later.\n  listenTo(obj, name, callback) {\n    if (!obj) {return this;}\n\n    const listener = getListener(obj, this);\n    const eventArgs = buildEventArgs(name, callback, this, listener);\n    each(eventArgs, listenToApi);\n\n    return this;\n  },\n\n  // Inversion-of-control versions of `once`.\n  listenToOnce(obj, name, callback) {\n    if (!obj) {return this;}\n\n    const listener = getListener(obj, this);\n    const eventArgs = buildEventArgs(name, callback, this, listener);\n    each(eventArgs, listenToOnceApi.bind(this));\n\n    return this;\n  },\n\n  // Tell this object to stop listening to either specific events ... or\n  // to every object it's currently listening to.\n  stopListening(obj, name, callback) {\n    const listeningTo = this._listeningTo;\n    if (!listeningTo) {return this;}\n\n    const eventArgs = buildEventArgs(name, callback, this);\n\n    const listenerIds = obj ? [obj._listenId] : keys(listeningTo);\n    for (let i = 0; i < listenerIds.length; i++) {\n      const listener = listeningTo[listenerIds[i]];\n\n      // If listening doesn't exist, this object is not currently\n      // listening to obj. Break out early.\n      if (!listener) {break;}\n\n      each(eventArgs, args => {\n        const listenToObj = listener.obj;\n        const events = listenToObj._events;\n\n        if (!events) {return;}\n\n        listenToObj._events = offReducer(events, args);\n\n        // Call `off` for interop\n        listenToObj.off(args.name, args.callback, this, { _internal: true });\n      });\n    }\n\n    return this;\n  },\n\n  // Trigger one or many events, firing all bound callbacks. Callbacks are\n  // passed the same arguments as `trigger` is, apart from the event name\n  // (unless you're listening on `\"all\"`, which will cause your callback to\n  // receive the true name of the event as the first argument).\n  trigger(name, ...args) {\n    if (!this._events) {return this;}\n\n    if (name && typeof name === 'object') {\n      each(keys(name), key => {\n        triggerApi({\n          events: this._events,\n          name: key,\n          args: [name[key]],\n        });\n      });\n    }\n\n    if (name && eventSplitter.test(name)) {\n      each(name.split(eventSplitter), n => {\n        triggerApi({\n          events: this._events,\n          name: n,\n          args,\n        });\n      });\n      return this;\n    }\n\n    triggerApi({\n      events: this._events,\n      name,\n      args,\n    });\n\n    return this;\n  },\n\n  triggerMethod,\n};\n","// If callback is not a function return the callback and flag it for removal\nexport default function makeCallback(callback) {\n  if (typeof callback === 'function') {\n    return callback;\n  }\n  const result = function() { return callback; };\n  result._callback = callback;\n  return result;\n}\n","import { each, extend, keys, reduce } from 'underscore';\n\nimport buildEventArgs, { eventSplitter } from '../utils/build-event-args';\nimport callHandler from '../utils/call-handler';\nimport makeCallback from '../utils/make-callback';\nimport onceWrap from '../utils/once-wrap';\n\n/*\n * Requests\n * -----------------------\n * A messaging system for requesting data.\n *\n */\n\nconst replyReducer = function(isOnce, requests, { name, callback, context }) {\n  // if (requests[name]) {\n  //   Radio.debugLog('A request was overwritten', name, this.channelName);\n  // }\n\n  requests[name] = {\n    callback: isOnce ? onceWrap(makeCallback(callback), this.stopReplying.bind(this, name)) : makeCallback(callback),\n    context: context || this,\n  };\n\n  return requests;\n};\n\nconst stopReducer = function(requests, { name, callback, context }) {\n  const names = name ? [name] : keys(requests);\n\n  each(names, key => {\n    const handler = requests[key];\n\n    // Bail out if there are no events stored.\n    if (\n      !handler ||\n        callback && callback !== handler.callback &&\n          callback !== handler.callback._callback ||\n            context && context !== handler.context\n    ) {\n      // Radio.debugLog('Attempted to remove the unregistered request', name, this.channelName);\n      return;\n    }\n\n    delete requests[key];\n  });\n\n  return requests;\n};\n\nexport default {\n\n  // Set up a handler for a request\n  reply(name, callback, context) {\n    const eventArgs = buildEventArgs(name, callback, context);\n\n    this._requests = reduce(eventArgs, replyReducer.bind(this, false), this._requests || {});\n\n    return this;\n  },\n\n  // Set up a handler that can only be requested once\n  replyOnce(name, callback, context) {\n    const eventArgs = buildEventArgs(name, callback, context);\n\n    this._requests = reduce(eventArgs, replyReducer.bind(this, true), this._requests || {});\n\n    return this;\n  },\n\n  // Remove handler(s)\n  stopReplying(name, callback, context) {\n    if (!this._requests) {return this;}\n\n    if (!name && !callback && !context) {\n      delete this._requests;\n      return this;\n    }\n\n    const eventArgs = buildEventArgs(name, callback, context);\n    this._requests = reduce(eventArgs, stopReducer.bind(this), this._requests || {});\n\n    return this;\n  },\n\n  // Make a request\n  request(name, ...args) {\n    if (name && typeof name === 'object') {\n      return reduce(keys(name), (replies, key) => {\n        const result = this.request(key, name[key]);\n        eventSplitter.test(key) ? extend(replies, result) : replies[key] = result;\n        return replies;\n      }, {});\n    }\n\n    if (name && eventSplitter.test(name)) {\n      return reduce(name.split(eventSplitter), (replies, n) => {\n        replies[n] = this.request(n, ...args);\n        return replies;\n      }, {});\n    }\n\n    // const channelName = this.channelName;\n    const requests = this._requests;\n\n    // // Check if we should log the request, and if so, do it\n    // if (channelName && this._tunedIn) {\n    //   Radio.log.apply(this, [channelName, name].concat(args));\n    // }\n\n    // If the request isn't handled, log it in DEBUG mode and exit\n    if (requests && (requests[name] || requests.default)) {\n      const handler = requests[name] || requests.default;\n      args = requests[name] ? args : arguments;\n      return callHandler(handler.callback, handler.context, args);\n    }\n\n    // Radio.debugLog('An unhandled request was fired', name, channelName);\n  },\n};\n","import { extend, result } from 'underscore';\n\nimport EventsMixin from './events';\nimport RequestsMixin from './requests';\nimport getOption from '../modules/common/get-option';\nimport mergeOptions from '../modules/common/merge-options';\nimport normalizeMethods from '../modules/common/normalize-methods';\nimport triggerMethod from '../modules/common/trigger-method';\nimport {\n  bindEvents,\n  unbindEvents\n} from '../modules/common/bind-events';\nimport {\n  bindRequests,\n  unbindRequests\n} from '../modules/common/bind-requests';\n\nconst CommonMixin = {\n\n  // This is a noop method intended to be overridden\n  initialize() {},\n\n  // Imports the \"normalizeMethods\" to transform hashes of\n  // events=>function references/names to a hash of events=>function references\n  normalizeMethods,\n\n  _setOptions(options, classOptions) {\n    this.options = extend({}, result(this, 'options'), options);\n    this.mergeOptions(options, classOptions);\n  },\n\n  // A handy way to merge passed-in options onto the instance\n  mergeOptions,\n\n  // Enable getting options from this or this.options by name.\n  getOption,\n\n  // Enable binding view's events from another entity.\n  bindEvents,\n\n  // Enable unbinding view's events from another entity.\n  unbindEvents,\n\n  // Enable binding view's requests.\n  bindRequests,\n\n  // Enable unbinding view's requests.\n  unbindRequests,\n\n  triggerMethod\n};\n\nextend(CommonMixin, EventsMixin, RequestsMixin);\n\nexport default CommonMixin;\n","export default {\n  _isDestroyed: false,\n\n  isDestroyed() {\n    return this._isDestroyed;\n  },\n\n  destroy(options) {\n    if (this._isDestroyed) { return this; }\n\n    this.triggerMethod('before:destroy', this, options);\n    this._isDestroyed = true;\n    this.triggerMethod('destroy', this, options);\n    this.stopListening();\n\n    return this;\n  }\n};\n","import { each, extend, keys } from 'underscore';\n\nimport Events from '../mixins/events';\nimport Requests from '../mixins/requests';\n\nimport callHandler from '../utils/call-handler';\n\n\nconst Radio = {};\n\n// Whether or not we're in DEBUG mode or not. DEBUG mode helps you\n// get around the issues of lack of warnings when events are mis-typed.\nRadio.DEBUG = false;\n\n// Format debug text.\nfunction debugText(warning, eventName, channelName) {\n  return warning + (channelName ? ` on the ${ channelName } channel` : '') +\n    `: \"${ eventName }\"`;\n}\n\n// This is the method that's called when an unregistered event was called.\n// By default, it logs warning to the console. By overriding this you could\n// make it throw an Error, for instance. This would make firing a nonexistent event\n// have the same consequence as firing a nonexistent method on an Object.\nRadio.debugLog = function(warning, eventName, channelName) {\n  if (Radio.DEBUG && console && console.warn) {\n    console.warn(debugText(warning, eventName, channelName));\n  }\n};\n\n/*\n * tune-in\n * -------\n * Get console logs of a channel's activity\n *\n */\n\nconst _logs = {};\n\n// This is to produce an identical function in both tuneIn and tuneOut,\n// so that Events unregisters it.\nfunction _partial(channelName) {\n  return _logs[channelName] || (_logs[channelName] = Radio.log.bind(Radio, channelName));\n}\n\nextend(Radio, {\n\n  // Log information about the channel and event\n  log(channelName, eventName, ...args) {\n    if (typeof console === 'undefined') { return; }\n    console.log(`[${ channelName }] \"${ eventName }\"`, args);\n  },\n\n  // Logs all events on this channel to the console. It sets an\n  // internal value on the channel telling it we're listening,\n  // then sets a listener on the Events\n  tuneIn(channelName) {\n    const channel = Radio.channel(channelName);\n    channel._tunedIn = true;\n    channel.on('all', _partial(channelName));\n    return this;\n  },\n\n  // Stop logging all of the activities on this channel to the console\n  tuneOut(channelName) {\n    const channel = Radio.channel(channelName);\n    channel._tunedIn = false;\n    channel.off('all', _partial(channelName));\n    delete _logs[channelName];\n    return this;\n  }\n});\n\n/*\n * Radio.channel\n * ----------------------\n * Get a reference to a channel by name.\n *\n */\n\nRadio._channels = {};\n\nRadio.channel = function(channelName) {\n  if (!channelName) {\n    throw new Error('You must provide a name for the channel.');\n  }\n\n  if (Radio._channels[channelName]) {\n    return Radio._channels[channelName];\n  }\n\n  return (Radio._channels[channelName] = new Radio.Channel(channelName));\n};\n\n/*\n * Radio.Channel\n * ----------------------\n * A Channel is an object that extends from Events,\n * and Radio.Requests.\n *\n */\n\nRadio.Channel = function(channelName) {\n  this.channelName = channelName;\n};\n\nextend(Radio.Channel.prototype, Events, Requests, {\n\n  // Remove all handlers from the messaging systems of this channel\n  reset() {\n    this.off();\n    this.stopListening();\n    this.stopReplying();\n    return this;\n  },\n});\n\n/*\n * Top-level API\n * -------------\n * Supplies the 'top-level API' for working with Channels directly\n * from Radio.\n *\n */\n\neach([Events, Requests], system => {\n  each(keys(system), methodName => {\n    Radio[methodName] = function(channelName, ...args) {\n      const channel = this.channel(channelName);\n      return callHandler(channel[methodName], channel, args);\n    };\n  });\n});\n\nRadio.reset = function(channelName) {\n  const channels = !channelName ? this._channels : [this._channels[channelName]];\n  each(channels, channel => { channel.reset(); });\n};\n\nexport default Radio;\n","import { result } from 'underscore';\nimport Radio from '../modules/radio';\n\n\n// MixinOptions\n// - channelName\n// - radioEvents\n// - radioRequests\n\nexport default {\n\n  _initRadio() {\n    const channelName = result(this, 'channelName');\n\n    if (!channelName) {\n      return;\n    }\n\n    const channel = this._channel = Radio.channel(channelName);\n\n    const radioEvents = result(this, 'radioEvents');\n    this.bindEvents(channel, radioEvents);\n\n    const radioRequests = result(this, 'radioRequests');\n    this.bindRequests(channel, radioRequests);\n\n    this.on('destroy', this._destroyRadio);\n  },\n\n  _destroyRadio() {\n    this._channel.stopReplying(null, null, this);\n  },\n\n  getChannel() {\n    return this._channel;\n  }\n};\n","// Object\n// ------\n\nimport { extend as _extend, uniqueId } from 'underscore';\nimport extend from '../utils/extend';\nimport CommonMixin from '../mixins/common';\nimport DestroyMixin from '../mixins/destroy';\nimport RadioMixin from '../mixins/radio';\n\nconst ClassOptions = [\n  'channelName',\n  'radioEvents',\n  'radioRequests'\n];\n\n// Object borrows many conventions and utilities from Backbone.\nconst MarionetteObject = function(options) {\n  this._setOptions(options, ClassOptions);\n  this.cid = uniqueId(this.cidPrefix);\n  this._initRadio();\n  this.initialize.apply(this, arguments);\n};\n\nMarionetteObject.extend = extend;\n\n// Object Methods\n// --------------\n\n_extend(MarionetteObject.prototype, CommonMixin, DestroyMixin, RadioMixin, {\n  cidPrefix: 'mno',\n});\n\nexport default MarionetteObject;\n","import { isFunction, extend, reduce, result, without, map } from 'underscore';\nimport MarionetteError from '../utils/error';\n\n// MixinOptions\n// - behaviors\n\n// Takes care of getting the behavior class\n// given options and a key.\n// If a user passes in options.behaviorClass\n// default to using that.\n// If a user passes in a Behavior Class directly, use that\n// Otherwise an error is thrown\nfunction getBehaviorClass(options) {\n  if (options.behaviorClass) {\n    return { BehaviorClass: options.behaviorClass, options };\n  }\n\n  //treat functions as a Behavior constructor\n  if (isFunction(options)) {\n    return { BehaviorClass: options, options: {} };\n  }\n\n  throw new MarionetteError({\n    message: 'Unable to get behavior class. A Behavior constructor should be passed directly or as behaviorClass property of options',\n    url: 'marionette.behavior.html#defining-and-attaching-behaviors'\n  });\n}\n\n// Iterate over the behaviors object, for each behavior\n// instantiate it and get its grouped behaviors.\n// This accepts a list of behaviors in either an object or array form\nfunction parseBehaviors(view, behaviors, allBehaviors) {\n  return reduce(behaviors, (reducedBehaviors, behaviorDefiniton) => {\n    const { BehaviorClass, options } = getBehaviorClass(behaviorDefiniton);\n    const behavior = new BehaviorClass(options, view);\n    reducedBehaviors.push(behavior);\n\n    return parseBehaviors(view, result(behavior, 'behaviors'), reducedBehaviors);\n  }, allBehaviors);\n}\n\nexport default {\n  _initBehaviors() {\n    this._behaviors = parseBehaviors(this, result(this, 'behaviors'), []);\n  },\n\n  _getBehaviorTriggers() {\n    const triggers = map(this._behaviors, behavior => behavior._getTriggers());\n    return reduce(triggers, function(memo, _triggers) {\n      return extend(memo, _triggers);\n    }, {});\n  },\n\n  _getBehaviorEvents() {\n    const events = map(this._behaviors, behavior => behavior._getEvents());\n    return reduce(events, function(memo, _events) {\n      return extend(memo, _events);\n    }, {});\n  },\n\n  // proxy behavior el to the view's el.\n  _setBehaviorElements() {\n    map(this._behaviors, behavior => behavior.setElement());\n  },\n\n  // delegate modelEvents and collectionEvents\n  _delegateBehaviorEntityEvents() {\n    map(this._behaviors, behavior => behavior.delegateEntityEvents());\n  },\n\n  // undelegate modelEvents and collectionEvents\n  _undelegateBehaviorEntityEvents() {\n    map(this._behaviors, behavior => behavior.undelegateEntityEvents());\n  },\n\n  _destroyBehaviors(options) {\n    // Call destroy on each behavior after\n    // destroying the view.\n    // This unbinds event listeners\n    // that behaviors have registered for.\n    map(this._behaviors, behavior => behavior.destroy(options));\n  },\n\n  // Remove a behavior\n  _removeBehavior(behavior) {\n    // Don't worry about the clean up if the view is destroyed\n    if (this._isDestroyed) { return; }\n\n    // Remove behavior-only triggers and events\n    this.undelegate(`.trig${ behavior.cid } .${ behavior.cid }`);\n\n    this._behaviors = without(this._behaviors, behavior);\n  },\n\n  _bindBehaviorUIElements() {\n    map(this._behaviors, behavior => behavior.bindUIElements());\n  },\n\n  _unbindBehaviorUIElements() {\n    map(this._behaviors, behavior => behavior.unbindUIElements());\n  },\n\n  _triggerEventOnBehaviors(eventName, view, options) {\n    map(this._behaviors, behavior => behavior.triggerMethod(eventName, view, options));\n  }\n};\n","import { result } from 'underscore';\n\n// MixinOptions\n// - collectionEvents\n// - modelEvents\n\nexport default {\n  // Handle `modelEvents`, and `collectionEvents` configuration\n  _delegateEntityEvents(model, collection) {\n    if (model) {\n      this._modelEvents = result(this, 'modelEvents');\n      this.bindEvents(model, this._modelEvents);\n    }\n\n    if (collection) {\n      this._collectionEvents = result(this, 'collectionEvents');\n      this.bindEvents(collection, this._collectionEvents);\n    }\n  },\n\n  // Remove any previously delegate entity events\n  _undelegateEntityEvents(model, collection) {\n    if (this._modelEvents) {\n      this.unbindEvents(model, this._modelEvents);\n      delete this._modelEvents;\n    }\n\n    if (this._collectionEvents) {\n      this.unbindEvents(collection, this._collectionEvents);\n      delete this._collectionEvents;\n    }\n  },\n\n  // Remove cached event handlers\n  _deleteEntityEventHandlers() {\n    delete this._modelEvents;\n    delete this._collectionEvents;\n  }\n};\n","import { map, result, extend } from 'underscore';\n\n// MixinOptions\n// - template\n// - templateContext\n\nexport default {\n\n  // Internal method to render the template with the serialized data\n  // and template context\n  _renderTemplate(template) {\n    // Add in entity data and template context\n    const data = this.mixinTemplateContext(this.serializeData()) || {};\n\n    // Render and add to el\n    const html = this._renderHtml(template, data);\n    if (typeof html !== 'undefined') {\n      this.attachElContent(html);\n    }\n  },\n\n  // Get the template for this view instance.\n  // You can set a `template` attribute in the view definition\n  // or pass a `template: TemplateFunction` parameter in\n  // to the constructor options.\n  getTemplate() {\n    return this.template;\n  },\n\n  // Mix in template context methods. Looks for a\n  // `templateContext` attribute, which can either be an\n  // object literal, or a function that returns an object\n  // literal. All methods and attributes from this object\n  // are copies to the object passed in.\n  mixinTemplateContext(serializedData) {\n    const templateContext = result(this, 'templateContext');\n    if (!templateContext) { return serializedData; }\n    if (!serializedData) { return templateContext; }\n    return extend({}, serializedData, templateContext);\n  },\n\n  // Serialize the view's model *or* collection, if\n  // it exists, for the template\n  serializeData() {\n    // If we have a model, we serialize that\n    if (this.model) {\n      return this.serializeModel();\n    }\n\n    // Otherwise, we serialize the collection,\n    // making it available under the `items` property\n    if (this.collection) {\n      return {\n        items: this.serializeCollection()\n      };\n    }\n  },\n\n  // Prepares the special `model` property of a view\n  // for being displayed in the template. Override this if\n  // you need a custom transformation for your view's model\n  serializeModel() {\n    return this.model.attributes;\n  },\n\n  // Serialize a collection\n  serializeCollection() {\n    return map(this.collection.models, model => model.attributes);\n  },\n\n  // Renders the data into the template\n  _renderHtml(template, data) {\n    return template(data);\n  },\n\n  // Attaches the content of a given view.\n  // This method can be overridden to optimize rendering,\n  // or to render in a non standard way.\n  //\n  // For example, using `innerHTML` instead of `$el.html`\n  //\n  // ```js\n  // attachElContent(html) {\n  //   this.el.innerHTML = html;\n  // }\n  // ```\n  attachElContent(html) {\n    this.Dom.setContents(this.el, html);\n  }\n};\n","import { each, reduce, isString, result } from 'underscore';\n// allows for the use of the @ui. syntax within\n// a given key for triggers and events\n// swaps the @ui with the associated selector.\n// Returns a new, non-mutated, parsed events hash.\nconst normalizeUIKeys = function(hash, ui) {\n  return reduce(hash, (memo, val, key) => {\n    const normalizedKey = normalizeUIString(key, ui);\n    memo[normalizedKey] = val;\n    return memo;\n  }, {});\n};\n\nconst uiRegEx = /@ui\\.[a-zA-Z-_$0-9]*/g;\n\n// utility method for parsing @ui. syntax strings\n// into associated selector\nconst normalizeUIString = function(uiString, ui) {\n  return uiString.replace(uiRegEx, (r) => {\n    return ui[r.slice(4)];\n  });\n};\n\n// allows for the use of the @ui. syntax within\n// a given value for regions\n// swaps the @ui with the associated selector\nconst normalizeUIValues = function(hash, ui, property) {\n  each(hash, (val, key) => {\n    if (isString(val)) {\n      hash[key] = normalizeUIString(val, ui);\n    } else if (val) {\n      const propertyVal = val[property];\n      if (isString(propertyVal)) {\n        val[property] = normalizeUIString(propertyVal, ui);\n      }\n    }\n  });\n  return hash;\n};\n\nexport default {\n\n  // normalize the keys of passed hash with the views `ui` selectors.\n  // `{\"@ui.foo\": \"bar\"}`\n  normalizeUIKeys(hash, uiBindings = this._getUIBindings()) {\n    return normalizeUIKeys(hash, uiBindings);\n  },\n\n  // normalize the passed string with the views `ui` selectors.\n  // `\"@ui.bar\"`\n  normalizeUIString(uiString, uiBindings = this._getUIBindings()) {\n    return normalizeUIString(uiString, uiBindings);\n  },\n\n  // normalize the values of passed hash with the views `ui` selectors.\n  // `{foo: \"@ui.bar\"}`\n  normalizeUIValues(hash, property, uiBindings = this._getUIBindings()) {\n    return normalizeUIValues(hash, uiBindings, property);\n  },\n\n  _getUIBindings() {\n    const uiBindings = result(this, '_uiBindings');\n    return uiBindings || result(this, 'ui');\n  },\n\n  // This method binds the elements specified in the \"ui\" hash inside the view's code with\n  // the associated jQuery selectors.\n  _bindUIElements() {\n    if (!this.ui) { return; }\n\n    // store the ui hash in _uiBindings so they can be reset later\n    // and so re-rendering the view will be able to find the bindings\n    if (!this._uiBindings) {\n      this._uiBindings = this.ui;\n    }\n\n    // get the bindings result, as a function or otherwise\n    const bindings = result(this, '_uiBindings');\n\n    // empty the ui so we don't have anything to start with\n    this._ui = {};\n\n    // bind each of the selectors\n    each(bindings, (selector, key) => {\n      this._ui[key] = this.$(selector);\n    });\n\n    this.ui = this._ui;\n  },\n\n  _unbindUIElements() {\n    if (!this.ui || !this._uiBindings) { return; }\n\n    // delete all of the existing ui bindings\n    each(this.ui, ($el, name) => {\n      delete this.ui[name];\n    });\n\n    // reset the ui element to the original bindings configuration\n    this.ui = this._uiBindings;\n    delete this._uiBindings;\n    delete this._ui;\n  },\n\n  _getUI(name) {\n    return this._ui[name];\n  }\n};\n","// Add Feature flags here\n// e.g. 'class' => false\nconst FEATURES = {\n  childViewEventPrefix: false,\n  triggersStopPropagation: true,\n  triggersPreventDefault: true,\n  DEV_MODE: false\n};\n\nfunction isEnabled(name) {\n  return !!FEATURES[name];\n}\n\nfunction setEnabled(name, state) {\n  return FEATURES[name] = state;\n}\n\nexport {\n  FEATURES,\n  setEnabled,\n  isEnabled\n};\n","// Event Delegator\n//  ---------\nimport { each, extend } from 'underscore';\n\n// Static setter\nexport function setEventDelegator(mixin) {\n  this.prototype.EventDelegator = extend({}, this.prototype.EventDelegator, mixin);\n  return this;\n}\n\nexport default {\n\n  shouldCapture(eventName) {\n    return ['focus', 'blur'].indexOf(eventName) !== -1;\n  },\n\n  // this.$el.on(eventName + '.delegateEvents' + this.cid, selector, handler);\n  delegate({ eventName, selector, handler, events, rootEl }) {\n    const shouldCapture = this.shouldCapture(eventName);\n\n    if (selector) {\n      const delegateHandler = function(evt) {\n        let node = evt.target;\n        for (; node && node !== rootEl; node = node.parentNode) {\n          if (Element.prototype.matches.call(node, selector)) {\n            evt.delegateTarget = node;\n            handler(evt);\n          }\n        }\n      };\n\n      events.push({ eventName, handler: delegateHandler });\n      Element.prototype.addEventListener.call(rootEl, eventName, delegateHandler, shouldCapture);\n\n      return;\n    }\n\n    events.push({ eventName, handler });\n    Element.prototype.addEventListener.call(rootEl, eventName, handler, shouldCapture);\n  },\n\n  // this.$el.off('.delegateEvents' + this.cid);\n  undelegateAll({ events, rootEl }) {\n    if (!rootEl) { return; }\n\n    each(events, ({ eventName, handler }) => {\n      const shouldCapture = this.shouldCapture(eventName);\n      Element.prototype.removeEventListener.call(rootEl, eventName, handler, shouldCapture);\n    });\n\n    events.length = 0;\n  }\n};\n","import { isString, isFunction, result, each } from 'underscore';\nimport { isEnabled } from '../config/features';\nimport EventDelegator from '../config/event-delegator';\n\nconst delegateEventSplitter = /^(\\S+)\\s*(.*)$/;\n\n// Internal method to create an event handler for a given `triggerDef` like\n// 'click:foo'\nfunction buildViewTrigger(view, triggerDef) {\n  if (isString(triggerDef)) {\n    triggerDef = {event: triggerDef};\n  }\n\n  const eventName = triggerDef.event;\n\n  let shouldPreventDefault = !!triggerDef.preventDefault;\n\n  if (isEnabled('triggersPreventDefault')) {\n    shouldPreventDefault = triggerDef.preventDefault !== false;\n  }\n\n  let shouldStopPropagation = !!triggerDef.stopPropagation;\n\n  if (isEnabled('triggersStopPropagation')) {\n    shouldStopPropagation = triggerDef.stopPropagation !== false;\n  }\n\n  return function(event, ...args) {\n    if (shouldPreventDefault) {\n      event.preventDefault();\n    }\n\n    if (shouldStopPropagation) {\n      event.stopPropagation();\n    }\n\n    view.triggerMethod(eventName, view, event, ...args);\n  };\n}\n\nexport default {\n\n  EventDelegator,\n\n  _initViewEvents() {\n    this._domEvents = [];\n  },\n\n  _undelegateViewEvents() {\n    this.EventDelegator.undelegateAll({\n      events: this._domEvents,\n      rootEl: this.el\n    });\n  },\n\n  _delegateViewEvents(view = this) {\n    const uiBindings = this._getUIBindings();\n    this._delegateEvents(uiBindings);\n    this._delegateTriggers(uiBindings, view);\n  },\n\n  _delegateEvents(uiBindings) {\n    if (!this.events) { return; }\n\n    each(result(this, 'events'), (handler, key) => {\n      if (!isFunction(handler)) {\n        handler = this[handler];\n      }\n      if (!handler) { return; }\n      this._delegate(handler.bind(this), this.normalizeUIString(key, uiBindings));\n    });\n  },\n\n  _delegateTriggers(uiBindings, view) {\n    if (!this.triggers) { return; }\n\n    each(result(this, 'triggers'), (value, key) => {\n      this._delegate(buildViewTrigger(view, value), this.normalizeUIString(key, uiBindings));\n    });\n  },\n\n  _delegate(handler, key) {\n    const match = key.match(delegateEventSplitter);\n    this.EventDelegator.delegate({\n      eventName: match[1],\n      selector: match[2],\n      handler,\n      events: this._domEvents,\n      rootEl: this.el\n    });\n  }\n};\n","// DomApi\n//  ---------\nimport { extend, each, keys } from 'underscore';\n\n// Static setter\nexport function setDomApi(mixin) {\n  this.prototype.Dom = extend({}, this.prototype.Dom, mixin);\n  return this;\n}\n\nexport default {\n  // Returns a new HTML DOM node of tagName\n  createElement(tagName) {\n    return document.createElement(tagName);\n  },\n\n  // Returns a new HTML DOM node instance\n  createBuffer() {\n    return document.createDocumentFragment();\n  },\n\n  // Returns the document element for a given DOM element\n  getDocumentEl(el) {\n    return el.ownerDocument.documentElement;\n  },\n\n  // Finds the `selector` string with the el\n  // Returns an array-like object of nodes\n  findEl(el, selector) {\n    return el.querySelectorAll(selector);\n  },\n\n  // Returns true if the el contains the node childEl\n  hasEl(el, childEl) {\n    return el.contains(childEl && childEl.parentNode);\n  },\n\n  // Detach `el` from the DOM without removing listeners\n  detachEl(el) {\n    if (el.parentNode) {el.parentNode.removeChild(el);}\n  },\n\n  // Remove `oldEl` from the DOM and put `newEl` in its place\n  replaceEl(newEl, oldEl) {\n    if (newEl === oldEl) {\n      return;\n    }\n\n    const parent = oldEl.parentNode;\n\n    if (!parent) {\n      return;\n    }\n\n    parent.replaceChild(newEl, oldEl);\n  },\n\n  // Swaps the location of `el1` and `el2` in the DOM\n  swapEl(el1, el2) {\n    if (el1 === el2) {\n      return;\n    }\n\n    const parent1 = el1.parentNode;\n    const parent2 = el2.parentNode;\n\n    if (!parent1 || !parent2) {\n      return;\n    }\n\n    const next1 = el1.nextSibling;\n    const next2 = el2.nextSibling;\n\n    parent1.insertBefore(el2, next1);\n    parent2.insertBefore(el1, next2);\n  },\n\n  // Replace the contents of `el` with the `html`\n  setContents(el, html) {\n    el.innerHTML = html\n  },\n\n  // Sets attributes on a DOM node\n  setAttributes(el, attrs) {\n    each(keys(attrs), attr => {\n      attr in el ? el[attr] = attrs[attr] : el.setAttribute(attr, attrs[attr]);\n    });\n  },\n\n  // Takes the DOM node `el` and appends the DOM node `contents`\n  // to the end of the element's contents.\n  appendContents(el, contents) {\n    el.appendChild(contents);\n  },\n\n  // Does the el have child nodes\n  hasContents(el) {\n    return !!el && el.hasChildNodes();\n  },\n\n  // Remove the inner contents of `el` from the DOM while leaving\n  // `el` itself in the DOM.\n  detachContents(el) {\n    el.textContent = '';\n  }\n};\n","// ViewMixin\n//  ---------\n\nimport { extend, result } from 'underscore';\nimport BehaviorsMixin from './behaviors';\nimport CommonMixin from './common';\nimport DelegateEntityEventsMixin from './delegate-entity-events';\nimport TemplateRenderMixin from './template-render';\nimport UIMixin from './ui';\nimport ViewEvents from './view-events';\nimport { isEnabled } from '../config/features';\nimport DomApi from '../config/dom';\n\n\n// MixinOptions\n// - attributes\n// - behaviors\n// - childViewEventPrefix\n// - childViewEvents\n// - childViewTriggers\n// - className\n// - collection\n// - collectionEvents\n// - el\n// - events\n// - id\n// - model\n// - modelEvents\n// - tagName\n// - triggers\n// - ui\n\n\nconst ViewMixin = {\n  tagName: 'div',\n\n  // This is a noop method intended to be overridden\n  preinitialize() {},\n\n  Dom: DomApi,\n\n  // Create an element from the `id`, `className` and `tagName` properties.\n  _getEl() {\n    if (!this.el) {\n      const el = this.Dom.createElement(result(this, 'tagName'));\n      const attrs = extend({}, result(this, 'attributes'));\n      if (this.id) {attrs.id = result(this, 'id');}\n      if (this.className) {attrs.class = result(this, 'className');}\n      this.Dom.setAttributes(el, attrs);\n      return el;\n    }\n\n    return result(this, 'el');\n  },\n\n  $(selector) {\n    return this.Dom.findEl(this.el, selector)\n  },\n\n  _isElAttached() {\n    return !!this.el && this.Dom.hasEl(this.Dom.getDocumentEl(this.el), this.el);\n  },\n\n  supportsRenderLifecycle: true,\n  supportsDestroyLifecycle: true,\n\n  _isDestroyed: false,\n\n  isDestroyed() {\n    return !!this._isDestroyed;\n  },\n\n  _isRendered: false,\n\n  isRendered() {\n    return !!this._isRendered;\n  },\n\n  _isAttached: false,\n\n  isAttached() {\n    return !!this._isAttached;\n  },\n\n  // Handle `modelEvents`, and `collectionEvents` configuration\n  delegateEntityEvents() {\n    this._delegateEntityEvents(this.model, this.collection);\n\n    // bind each behaviors model and collection events\n    this._delegateBehaviorEntityEvents();\n\n    return this;\n  },\n\n  // Handle unbinding `modelEvents`, and `collectionEvents` configuration\n  undelegateEntityEvents() {\n    this._undelegateEntityEvents(this.model, this.collection);\n\n    // unbind each behaviors model and collection events\n    this._undelegateBehaviorEntityEvents();\n\n    return this;\n  },\n\n  // Handle destroying the view and its children.\n  destroy(options) {\n    if (this._isDestroyed || this._isDestroying) { return this; }\n    this._isDestroying = true;\n    const shouldTriggerDetach = this._isAttached && !this._disableDetachEvents;\n\n    this.triggerMethod('before:destroy', this, options);\n    if (shouldTriggerDetach) {\n      this.triggerMethod('before:detach', this);\n    }\n\n    // unbind UI elements\n    this.unbindUIElements();\n    this._undelegateViewEvents();\n\n    // remove the view from the DOM\n    this.Dom.detachEl(this.el);\n\n    if (shouldTriggerDetach) {\n      this._isAttached = false;\n      this.triggerMethod('detach', this);\n    }\n\n    // remove children after the remove to prevent extra paints\n    this._removeChildren();\n\n    this._isDestroyed = true;\n    this._isRendered = false;\n\n    // Destroy behaviors after _isDestroyed flag\n    this._destroyBehaviors(options);\n\n    this._deleteEntityEventHandlers();\n\n    this.triggerMethod('destroy', this, options);\n    this._triggerEventOnBehaviors('destroy', this, options);\n\n    this.stopListening();\n\n    return this;\n  },\n\n  // This method binds the elements specified in the \"ui\" hash\n  bindUIElements() {\n    this._bindUIElements();\n    this._bindBehaviorUIElements();\n\n    return this;\n  },\n\n  // This method unbinds the elements specified in the \"ui\" hash\n  unbindUIElements() {\n    this._unbindUIElements();\n    this._unbindBehaviorUIElements();\n\n    return this;\n  },\n\n  getUI(name) {\n    return this._getUI(name);\n  },\n\n  // Cache `childViewEvents` and `childViewTriggers`\n  _buildEventProxies() {\n    this._childViewEvents = this.normalizeMethods(result(this, 'childViewEvents'));\n    this._childViewTriggers = result(this, 'childViewTriggers');\n    this._eventPrefix = this._getEventPrefix();\n  },\n\n  _getEventPrefix() {\n    const defaultPrefix = isEnabled('childViewEventPrefix') ? 'childview' : false;\n    const prefix = result(this, 'childViewEventPrefix', defaultPrefix);\n\n    return (prefix === false) ? prefix : prefix + ':';\n  },\n\n  _proxyChildViewEvents(view) {\n    if (this._childViewEvents || this._childViewTriggers || this._eventPrefix) {\n      this.listenTo(view, 'all', this._childViewEventHandler);\n    }\n  },\n\n  _childViewEventHandler(eventName, ...args) {\n    const childViewEvents = this._childViewEvents;\n\n    // call collectionView childViewEvent if defined\n    if (childViewEvents && childViewEvents[eventName]) {\n      childViewEvents[eventName].apply(this, args);\n    }\n\n    // use the parent view's proxyEvent handlers\n    const childViewTriggers = this._childViewTriggers;\n\n    // Call the event with the proxy name on the parent layout\n    if (childViewTriggers && childViewTriggers[eventName]) {\n      this.triggerMethod(childViewTriggers[eventName], ...args);\n    }\n\n    if (this._eventPrefix) {\n      this.triggerMethod(this._eventPrefix + eventName, ...args);\n    }\n  }\n};\n\nextend(ViewMixin, BehaviorsMixin, CommonMixin, DelegateEntityEventsMixin, TemplateRenderMixin, UIMixin, ViewEvents);\n\nexport default ViewMixin;\n","export function isView(view) {\n  return view.render && (view.destroy || view.remove);\n}\n\nexport function isViewClass(ViewClass) {\n  return ViewClass.prototype.render && (ViewClass.prototype.destroy || ViewClass.prototype.remove);\n}\n\nexport function renderView(view) {\n  if (view._isRendered) {\n    return;\n  }\n\n  if (!view.supportsRenderLifecycle) {\n    view.triggerMethod('before:render', view);\n  }\n\n  view.render();\n  view._isRendered = true;\n\n  if (!view.supportsRenderLifecycle) {\n    view.triggerMethod('render', view);\n  }\n}\n\nexport function destroyView(view, disableDetachEvents) {\n  if (view.destroy) {\n    // Attach flag for public destroy function internal check\n    view._disableDetachEvents = disableDetachEvents;\n    view.destroy();\n    return;\n  }\n\n  // Destroy for non-Marionette Views\n  if (!view.supportsDestroyLifecycle) {\n    view.triggerMethod('before:destroy', view);\n  }\n\n  const shouldTriggerDetach = view._isAttached && !disableDetachEvents;\n\n  if (shouldTriggerDetach) {\n    view.triggerMethod('before:detach', view);\n  }\n\n  view.remove();\n\n  if (shouldTriggerDetach) {\n    view._isAttached = false;\n    view.triggerMethod('detach', view);\n  }\n\n  view._isDestroyed = true;\n\n  if (!view.supportsDestroyLifecycle) {\n    view.triggerMethod('destroy', view);\n  }\n}\n","// Region\n// ------\n\nimport { extend as _extend, uniqueId, isObject, isFunction, result } from 'underscore';\nimport MarionetteError from '../utils/error';\nimport extend from '../utils/extend';\nimport monitorViewEvents from './common/monitor-view-events';\nimport { renderView, destroyView, isView } from './common/view';\nimport CommonMixin from '../mixins/common';\nimport View from './view';\nimport DomApi, { setDomApi } from '../config/dom';\n\nconst classErrorName = 'RegionError';\n\nconst ClassOptions = [\n  'allowMissingEl',\n  'parentEl',\n  'replaceElement'\n];\n\nconst Region = function(options) {\n  this._setOptions(options, ClassOptions);\n\n  this.cid = uniqueId(this.cidPrefix);\n\n  // getOption necessary because options.el may be passed as undefined\n  this._initEl = this.el = this.getOption('el');\n\n  this.initialize.apply(this, arguments);\n};\n\nRegion.extend = extend;\nRegion.setDomApi = setDomApi;\n\n// Region Methods\n// --------------\n\n_extend(Region.prototype, CommonMixin, {\n  Dom: DomApi,\n\n  cidPrefix: 'mnr',\n  replaceElement: false,\n  _isReplaced: false,\n  _isSwappingView: false,\n\n  // Displays a view instance inside of the region. If necessary handles calling the `render`\n  // method for you. Reads content directly from the `el` attribute.\n  show(view, options) {\n    if (!this._ensureElement(options)) {\n      return;\n    }\n\n    view = this._getView(view, options);\n\n    if (view === this.currentView) { return this; }\n\n    if (view._isShown) {\n      throw new MarionetteError({\n        name: classErrorName,\n        message: 'View is already shown in a Region or CollectionView',\n        url: 'marionette.region.html#showing-a-view'\n      });\n    }\n\n    this._isSwappingView = !!this.currentView;\n\n    this.triggerMethod('before:show', this, view, options);\n\n    // Assume an attached view is already in the region for pre-existing DOM\n    if (this.currentView || !view._isAttached) {\n      this.empty(options);\n    }\n\n    this._setupChildView(view);\n\n    this.currentView = view;\n\n    renderView(view);\n\n    this._attachView(view, options);\n\n    this.triggerMethod('show', this, view, options);\n\n    this._isSwappingView = false;\n\n    return this;\n  },\n\n  _setEl(el) {\n    if (isObject(el)) {\n      this.el = el;\n      return;\n    }\n\n    if (!el) {\n      throw new MarionetteError({\n        name: classErrorName,\n        message: 'An \"el\" must be specified for a region.',\n        url: 'marionette.region.html#additional-options'\n      });\n    }\n\n    this.el = this.getEl(el);\n  },\n\n  // Set the `el` of the region and move any current view to the new `el`.\n  _setElement(el) {\n    if (el === this.el) { return this; }\n\n    const shouldReplace = this._isReplaced;\n\n    this._restoreEl();\n\n    this._setEl(el);\n\n    if (this.currentView) {\n      const view = this.currentView;\n\n      if (shouldReplace) {\n        this._replaceEl(view);\n      } else {\n        this.attachHtml(view);\n      }\n    }\n\n    return this;\n  },\n\n  _setupChildView(view) {\n    monitorViewEvents(view);\n\n    this._proxyChildViewEvents(view);\n\n    // We need to listen for if a view is destroyed in a way other than through the region.\n    // If this happens we need to remove the reference to the currentView since once a view\n    // has been destroyed we can not reuse it.\n    view.on('destroy', this._empty, this);\n  },\n\n  _proxyChildViewEvents(view) {\n    const parentView = this._parentView;\n\n    if (!parentView) { return; }\n\n    parentView._proxyChildViewEvents(view);\n  },\n\n  // If the regions parent view is not monitoring its attach/detach events\n  _shouldDisableMonitoring() {\n    return this._parentView && this._parentView.monitorViewEvents === false;\n  },\n\n  _isElAttached() {\n    return this.Dom.hasEl(this.Dom.getDocumentEl(this.el), this.el);\n  },\n\n  _attachView(view, { replaceElement } = {}) {\n    const shouldTriggerAttach = !view._isAttached && this._isElAttached() && !this._shouldDisableMonitoring();\n    const shouldReplaceEl = typeof replaceElement === 'undefined' ? !!result(this, 'replaceElement') : !!replaceElement;\n\n    if (shouldTriggerAttach) {\n      view.triggerMethod('before:attach', view);\n    }\n\n    if (shouldReplaceEl) {\n      this._replaceEl(view);\n    } else {\n      this.attachHtml(view);\n    }\n\n    if (shouldTriggerAttach) {\n      view._isAttached = true;\n      view.triggerMethod('attach', view);\n    }\n\n    // Corresponds that view is shown in a marionette Region or CollectionView\n    view._isShown = true;\n  },\n\n  _ensureElement(options = {}) {\n    this._setEl(this.el);\n\n    if (!this.el) {\n      const allowMissingEl = typeof options.allowMissingEl === 'undefined' ? !!result(this, 'allowMissingEl') : !!options.allowMissingEl;\n\n      if (allowMissingEl) {\n        return false;\n      } else {\n        throw new MarionetteError({\n          name: classErrorName,\n          message: `An \"el\" must exist in DOM for this region ${this.cid}`,\n          url: 'marionette.region.html#additional-options'\n        });\n      }\n    }\n    return true;\n  },\n\n  _getView(view) {\n    if (!view) {\n      throw new MarionetteError({\n        name: classErrorName,\n        message: 'The view passed is undefined and therefore invalid. You must pass a view instance to show.',\n        url: 'marionette.region.html#showing-a-view'\n      });\n    }\n\n    if (view._isDestroyed) {\n      throw new MarionetteError({\n        name: classErrorName,\n        message: `View (cid: \"${view.cid}\") has already been destroyed and cannot be used.`,\n        url: 'marionette.region.html#showing-a-view'\n      });\n    }\n\n    if (isView(view)) {\n      return view;\n    }\n\n    const viewOptions = this._getViewOptions(view);\n\n    return new View(viewOptions);\n  },\n\n  // This allows for a template or a static string to be\n  // used as a template\n  _getViewOptions(viewOptions) {\n    if (isFunction(viewOptions)) {\n      return { template: viewOptions };\n    }\n\n    if (isObject(viewOptions)) {\n      return viewOptions;\n    }\n\n    const template = function() { return viewOptions; };\n\n    return { template };\n  },\n\n  // Override this method to change how the region finds the DOM element that it manages. Return\n  // a jQuery selector object scoped to a provided parent el or the document if none exists.\n  getEl(el) {\n    const context = result(this, 'parentEl');\n\n    return this.Dom.findEl(context || document, el)[0];\n  },\n\n  _replaceEl(view) {\n    // Always restore the el to ensure the regions el is present before replacing\n    this._restoreEl();\n\n    view.on('before:destroy', this._restoreEl, this);\n\n    this.Dom.replaceEl(view.el, this.el);\n\n    this._isReplaced = true;\n  },\n\n  // Restore the region's element in the DOM.\n  _restoreEl() {\n    // There is nothing to replace\n    if (!this._isReplaced) {\n      return;\n    }\n\n    const view = this.currentView;\n\n    if (!view) {\n      return;\n    }\n\n    this._detachView(view);\n\n    this._isReplaced = false;\n  },\n\n  // Check to see if the region's el was replaced.\n  isReplaced() {\n    return !!this._isReplaced;\n  },\n\n  // Check to see if a view is being swapped by another\n  isSwappingView() {\n    return !!this._isSwappingView;\n  },\n\n  // Override this method to change how the new view is appended to the `$el` that the\n  // region is managing\n  attachHtml(view) {\n    this.Dom.appendContents(this.el, view.el);\n  },\n\n  // Destroy the current view, if there is one. If there is no current view,\n  // it will detach any html inside the region's `el`.\n  empty(options = { allowMissingEl: true }) {\n    const view = this.currentView;\n\n    // If there is no view in the region we should only detach current html\n    if (!view) {\n      if (this._ensureElement(options)) {\n        this.detachHtml();\n      }\n      return this;\n    }\n\n    this._empty(view, true);\n    return this;\n  },\n\n  _empty(view, shouldDestroy) {\n    view.off('destroy', this._empty, this);\n    this.triggerMethod('before:empty', this, view);\n\n    this._restoreEl();\n\n    delete this.currentView;\n\n    if (!view._isDestroyed) {\n      if (shouldDestroy) {\n        this.removeView(view);\n      } else {\n        this._detachView(view);\n      }\n      view._isShown = false;\n      this._stopChildViewEvents(view);\n    }\n\n    this.triggerMethod('empty', this, view);\n  },\n\n  _stopChildViewEvents(view) {\n    const parentView = this._parentView;\n\n    if (!parentView) { return; }\n\n    this._parentView.stopListening(view);\n  },\n\n  // Non-Marionette safe view.destroy\n  destroyView(view) {\n    if (view._isDestroyed) {\n      return view;\n    }\n\n    destroyView(view, this._shouldDisableMonitoring());\n    return view;\n  },\n\n  // Override this method to determine what happens when the view\n  // is removed from the region when the view is not being detached\n  removeView(view) {\n    this.destroyView(view);\n  },\n\n  // Empties the Region without destroying the view\n  // Returns the detached view\n  detachView() {\n    const view = this.currentView;\n\n    if (!view) {\n      return;\n    }\n\n    this._empty(view);\n\n    return view;\n  },\n\n  _detachView(view) {\n    const shouldTriggerDetach = view._isAttached && !this._shouldDisableMonitoring();\n    const shouldRestoreEl = this._isReplaced;\n    if (shouldTriggerDetach) {\n      view.triggerMethod('before:detach', view);\n    }\n\n    if (shouldRestoreEl) {\n      this.Dom.replaceEl(this.el, view.el);\n    } else {\n      this.detachHtml();\n    }\n\n    if (shouldTriggerDetach) {\n      view._isAttached = false;\n      view.triggerMethod('detach', view);\n    }\n  },\n\n  // Override this method to change how the region detaches current content\n  detachHtml() {\n    this.Dom.detachContents(this.el);\n  },\n\n  // Checks whether a view is currently present within the region. Returns `true` if there is\n  // and `false` if no view is present.\n  hasView() {\n    return !!this.currentView;\n  },\n\n  // Reset the region by destroying any existing view and clearing out the cached `$el`.\n  // The next time a view is shown via this region, the region will re-query the DOM for\n  // the region's `el`.\n  reset(options) {\n    this.empty(options);\n\n    this.el = this._initEl;\n\n    delete this.$el;\n    return this;\n  },\n\n  _isDestroyed: false,\n\n  isDestroyed() {\n    return this._isDestroyed;\n  },\n\n  // Destroy the region, remove any child view\n  // and remove the region from any associated view\n  destroy(options) {\n    if (this._isDestroyed) { return this; }\n\n    this.triggerMethod('before:destroy', this, options);\n    this._isDestroyed = true;\n\n    this.reset(options);\n\n    if (this._name) {\n      this._parentView._removeReferences(this._name);\n    }\n    delete this._parentView;\n    delete this._name;\n\n    this.triggerMethod('destroy', this, options);\n    this.stopListening();\n\n    return this;\n  }\n});\n\nexport default Region;\n","import { isString, isFunction, isObject, extend } from 'underscore';\nimport MarionetteError from '../../utils/error';\nimport Region from '../region';\n\n// return the region instance from the definition\nexport default function(definition, defaults) {\n  if (definition instanceof Region) {\n    return definition;\n  }\n\n  if (isString(definition)) {\n    return buildRegionFromObject(defaults, { el: definition });\n  }\n\n  if (isFunction(definition)) {\n    return buildRegionFromObject(defaults, { regionClass: definition });\n  }\n\n  if (isObject(definition)) {\n    return buildRegionFromObject(defaults, definition);\n  }\n\n  throw new MarionetteError({\n    message: 'Improper region configuration type.',\n    url: 'marionette.region.html#defining-regions'\n  });\n}\n\nfunction buildRegionFromObject(defaults, definition) {\n  const options = extend({}, defaults, definition);\n\n  const RegionClass = options.regionClass\n\n  delete options.regionClass;\n\n  return new RegionClass(options);\n}\n","import { clone, result, isEmpty, extend, partial, each, reduce } from 'underscore';\nimport buildRegion from '../modules/common/build-region';\nimport Region from '../modules/region';\n\n// MixinOptions\n// - regions\n// - regionClass\n\nexport default {\n  regionClass: Region,\n\n  // Internal method to initialize the regions that have been defined in a\n  // `regions` attribute on this View.\n  _initRegions() {\n\n    // init regions hash\n    this.regions = this.regions || {};\n    this._regions = {};\n\n    this.addRegions(result(this, 'regions'));\n  },\n\n  // Internal method to re-initialize all of the regions by updating\n  // the `el` that they point to\n  _reInitRegions() {\n    each(this._regions, region => region.reset());\n  },\n\n  // Add a single region, by name, to the View\n  addRegion(name, definition) {\n    const regions = {};\n    regions[name] = definition;\n    return this.addRegions(regions)[name];\n  },\n\n  // Add multiple regions as a {name: definition, name2: def2} object literal\n  addRegions(regions) {\n    // If there's nothing to add, stop here.\n    if (isEmpty(regions)) {\n      return;\n    }\n\n    // Normalize region selectors hash to allow\n    // a user to use the @ui. syntax.\n    regions = this.normalizeUIValues(regions, 'el');\n\n    // Add the regions definitions to the regions property\n    this.regions = extend({}, this.regions, regions);\n\n    return this._addRegions(regions);\n  },\n\n  // internal method to build and add regions\n  _addRegions(regionDefinitions) {\n    const defaults = {\n      regionClass: this.regionClass,\n      parentEl: partial(result, this, 'el')\n    };\n\n    return reduce(regionDefinitions, (regions, definition, name) => {\n      regions[name] = buildRegion(definition, defaults);\n      this._addRegion(regions[name], name);\n      return regions;\n    }, {});\n  },\n\n  _addRegion(region, name) {\n    this.triggerMethod('before:add:region', this, name, region);\n\n    region._parentView = this;\n    region._name = name;\n\n    this._regions[name] = region;\n\n    this.triggerMethod('add:region', this, name, region);\n  },\n\n  // Remove a single region from the View, by name\n  removeRegion(name) {\n    const region = this._regions[name];\n\n    this._removeRegion(region, name);\n\n    return region;\n  },\n\n  // Remove all regions from the View\n  removeRegions() {\n    const regions = this._getRegions();\n\n    each(this._regions, this._removeRegion.bind(this));\n\n    return regions;\n  },\n\n  _removeRegion(region, name) {\n    this.triggerMethod('before:remove:region', this, name, region);\n\n    region.destroy();\n\n    this.triggerMethod('remove:region', this, name, region);\n  },\n\n  // Called in a region's destroy\n  _removeReferences(name) {\n    delete this.regions[name];\n    delete this._regions[name];\n  },\n\n  // Empty all regions in the region manager, but\n  // leave them attached\n  emptyRegions() {\n    const regions = this.getRegions();\n    each(regions, region => region.empty());\n    return regions;\n  },\n\n  // Checks to see if view contains region\n  // Accepts the region name\n  // hasRegion('main')\n  hasRegion(name) {\n    return !!this.getRegion(name);\n  },\n\n  // Provides access to regions\n  // Accepts the region name\n  // getRegion('main')\n  getRegion(name) {\n    if (!this._isRendered) {\n      this.render();\n    }\n    return this._regions[name];\n  },\n\n  _getRegions() {\n    return clone(this._regions);\n  },\n\n  // Get all regions\n  getRegions() {\n    if (!this._isRendered) {\n      this.render();\n    }\n    return this._getRegions();\n  },\n\n  showChildView(name, view, options) {\n    const region = this.getRegion(name);\n    region.show(view, options);\n    return view;\n  },\n\n  detachChildView(name) {\n    return this.getRegion(name).detachView();\n  },\n\n  getChildView(name) {\n    return this.getRegion(name).currentView;\n  }\n\n};\n","// Static setter for the renderer\nexport function setRenderer(renderer) {\n  this.prototype._renderHtml = renderer;\n  return this;\n}\n","// View\n// ---------\n\nimport { extend as _extend, uniqueId, reduce } from 'underscore';\nimport extend from '../utils/extend';\nimport monitorViewEvents from './common/monitor-view-events';\nimport ViewMixin from '../mixins/view';\nimport RegionsMixin from '../mixins/regions';\nimport { setDomApi } from '../config/dom';\nimport { setEventDelegator } from '../config/event-delegator';\nimport { setRenderer } from '../config/renderer';\n\nconst ClassOptions = [\n  'attributes',\n  'behaviors',\n  'childViewEventPrefix',\n  'childViewEvents',\n  'childViewTriggers',\n  'className',\n  'collection',\n  'collectionEvents',\n  'el',\n  'events',\n  'id',\n  'model',\n  'modelEvents',\n  'regionClass',\n  'regions',\n  'tagName',\n  'template',\n  'templateContext',\n  'triggers',\n  'ui'\n];\n\n// Used by _getImmediateChildren\nfunction childReducer(children, region) {\n  if (region.currentView) {\n    children.push(region.currentView);\n  }\n\n  return children;\n}\n\n// The standard view. Includes view events, automatic rendering\n// templates, nested views, and more.\nconst View = function(options) {\n  this.cid = uniqueId(this.cidPrefix);\n  this._setOptions(options, ClassOptions);\n\n  this.preinitialize.apply(this, arguments);\n\n  this._initViewEvents();\n  this.setElement(this._getEl());\n\n  monitorViewEvents(this);\n\n  this._initBehaviors();\n  this._initRegions();\n  this._buildEventProxies();\n\n  this.initialize.apply(this, arguments);\n\n  this.delegateEntityEvents();\n\n  this._triggerEventOnBehaviors('initialize', this, options);\n};\n\n_extend(View, { extend, setRenderer, setDomApi, setEventDelegator });\n\n_extend(View.prototype, ViewMixin, RegionsMixin, {\n  cidPrefix: 'mnv',\n\n  setElement(element) {\n    this._undelegateViewEvents();\n    this.el = element;\n    this._setBehaviorElements();\n\n    this._isRendered = this.Dom.hasContents(this.el);\n    this._isAttached = this._isElAttached();\n\n    if (this._isRendered) {\n      this.bindUIElements();\n    }\n\n    this._delegateViewEvents();\n\n    return this;\n  },\n\n  // If a template is available, renders it into the view's `el`\n  // Re-inits regions and binds UI.\n  render() {\n    const template = this.getTemplate();\n\n    if (template === false || this._isDestroyed) { return this; }\n\n    this.triggerMethod('before:render', this);\n\n    // If this is not the first render call, then we need to\n    // re-initialize the `el` for each region\n    if (this._isRendered) {\n      this._reInitRegions();\n    }\n\n    this._renderTemplate(template);\n    this.bindUIElements();\n\n    this._isRendered = true;\n    this.triggerMethod('render', this);\n\n    return this;\n  },\n\n  // called by ViewMixin destroy\n  _removeChildren() {\n    this.removeRegions();\n  },\n\n  _getImmediateChildren() {\n    return reduce(this._regions, childReducer, []);\n  }\n});\n\nexport default View;\n","import { extend, partial, sortBy } from 'underscore';\n\nimport { forEach, each, map, find, detect, filter,\n  select, reject, every, all, some, any, include,\n  contains, invoke, toArray, first, initial, rest,\n  last, without, isEmpty, pluck, reduce, partition } from 'underscore';\n\nconst _ = { forEach, each, map, find, detect, filter,\n  select, reject, every, all, some, any, include,\n  contains, invoke, toArray, first, initial, rest,\n  last, without, isEmpty, pluck, reduce, partition };\n\n// Provide a container to store, retrieve and\n// shut down child views.\nconst Container = function() {\n  this._init();\n};\n\n// Mix in methods from Underscore, for iteration, and other\n// collection related features.\n// Borrowing this code from Backbone.Collection:\n// https://github.com/jashkenas/backbone/blob/1.1.2/backbone.js#L962\nconst methods = ['forEach', 'each', 'map', 'find', 'detect', 'filter',\n  'select', 'reject', 'every', 'all', 'some', 'any', 'include',\n  'contains', 'invoke', 'toArray', 'first', 'initial', 'rest',\n  'last', 'without', 'isEmpty', 'pluck', 'reduce', 'partition'];\n\neach(methods, function(method) {\n  Container.prototype[method] = function(...args) {\n    return _[method].apply(_, [this._views].concat(args));\n  };\n});\n\nfunction stringComparator(comparator, view) {\n  return view.model && view.model.get(comparator);\n}\n\n// Container Methods\n// -----------------\n\nextend(Container.prototype, {\n\n  // Initializes an empty container\n  _init() {\n    this._views = [];\n    this._viewsByCid = {};\n    this._indexByModel = {};\n    this._updateLength();\n  },\n\n  // Add a view to this container. Stores the view\n  // by `cid` and makes it searchable by the model\n  // cid (and model itself). Additionally it stores\n  // the view by index in the _views array\n  _add(view, index = this._views.length) {\n    this._addViewIndexes(view);\n\n    // add to end by default\n    this._views.splice(index, 0, view);\n\n    this._updateLength();\n  },\n\n  _addViewIndexes(view) {\n    // store the view\n    this._viewsByCid[view.cid] = view;\n\n    // index it by model\n    if (view.model) {\n      this._indexByModel[view.model.cid] = view;\n    }\n  },\n\n  // Sort (mutate) and return the array of the child views.\n  _sort(comparator, context) {\n    if (typeof comparator === 'string') {\n      comparator = partial(stringComparator, comparator);\n      return this._sortBy(comparator);\n    }\n\n    if (comparator.length === 1) {\n      return this._sortBy(comparator.bind(context));\n    }\n\n    return this._views.sort(comparator.bind(context));\n  },\n\n  // Makes `sortBy` mutate the array to match `this._views.sort`\n  _sortBy(comparator) {\n    const sortedViews = sortBy(this._views, comparator);\n\n    this._set(sortedViews);\n\n    return sortedViews;\n  },\n\n  // Replace array contents without overwriting the reference.\n  // Should not add/remove views\n  _set(views, shouldReset) {\n    this._views.length = 0;\n\n    this._views.push.apply(this._views, views.slice(0));\n\n    if (shouldReset) {\n      this._viewsByCid = {};\n      this._indexByModel = {};\n\n      each(views, this._addViewIndexes.bind(this));\n\n      this._updateLength();\n    }\n  },\n\n  // Swap views by index\n  _swap(view1, view2) {\n    const view1Index = this.findIndexByView(view1);\n    const view2Index = this.findIndexByView(view2);\n\n    if (view1Index === -1 || view2Index === -1) {\n      return;\n    }\n\n    const swapView = this._views[view1Index];\n    this._views[view1Index] = this._views[view2Index];\n    this._views[view2Index] = swapView;\n  },\n\n  // Find a view by the model that was attached to it.\n  // Uses the model's `cid` to find it.\n  findByModel(model) {\n    return this.findByModelCid(model.cid);\n  },\n\n  // Find a view by the `cid` of the model that was attached to it.\n  findByModelCid(modelCid) {\n    return this._indexByModel[modelCid];\n  },\n\n  // Find a view by index.\n  findByIndex(index) {\n    return this._views[index];\n  },\n\n  // Find the index of a view instance\n  findIndexByView(view) {\n    return this._views.indexOf(view);\n  },\n\n  // Retrieve a view by its `cid` directly\n  findByCid(cid) {\n    return this._viewsByCid[cid];\n  },\n\n  hasView(view) {\n    return !!this.findByCid(view.cid);\n  },\n\n  // Remove a view and clean up index references.\n  _remove(view) {\n    if (!this._viewsByCid[view.cid]) {\n      return;\n    }\n\n    // delete model index\n    if (view.model) {\n      delete this._indexByModel[view.model.cid];\n    }\n\n    // remove the view from the container\n    delete this._viewsByCid[view.cid];\n\n    const index = this.findIndexByView(view);\n    this._views.splice(index, 1);\n\n    this._updateLength();\n  },\n\n  // Update the `.length` attribute on this container\n  _updateLength() {\n    this.length = this._views.length;\n  }\n});\n\nexport default Container;\n","// Collection View\n// ---------------\n\nimport { extend as _extend, uniqueId, result, map, isFunction, isObject, isString, matches, each, reduce } from 'underscore';\nimport extend from '../utils/extend';\nimport MarionetteError from '../utils/error';\nimport { renderView, destroyView, isViewClass } from './common/view';\nimport monitorViewEvents from './common/monitor-view-events';\nimport ChildViewContainer from './child-view-container';\nimport Region from './region';\nimport ViewMixin from '../mixins/view';\nimport { setDomApi } from '../config/dom';\nimport { setEventDelegator } from '../config/event-delegator';\nimport { setRenderer } from '../config/renderer';\n\nconst classErrorName = 'CollectionViewError';\n\nconst ClassOptions = [\n  'attributes',\n  'behaviors',\n  'childView',\n  'childViewContainer',\n  'childViewEventPrefix',\n  'childViewEvents',\n  'childViewOptions',\n  'childViewTriggers',\n  'className',\n  'collection',\n  'collectionEvents',\n  'el',\n  'emptyView',\n  'emptyViewOptions',\n  'events',\n  'id',\n  'model',\n  'modelEvents',\n  'sortWithCollection',\n  'tagName',\n  'template',\n  'templateContext',\n  'triggers',\n  'ui',\n  'viewComparator',\n  'viewFilter'\n];\n\n// A view that iterates over a Backbone.Collection\n// and renders an individual child view for each model.\nconst CollectionView = function(options) {\n  this.cid = uniqueId(this.cidPrefix);\n  this._setOptions(options, ClassOptions);\n\n  this.preinitialize.apply(this, arguments);\n\n  this._initViewEvents();\n  this.setElement(this._getEl());\n\n  monitorViewEvents(this);\n\n  this._initChildViewStorage();\n  this._initBehaviors();\n  this._buildEventProxies();\n\n  // Init empty region\n  this.getEmptyRegion();\n\n  this.initialize.apply(this, arguments);\n\n  this.delegateEntityEvents();\n\n  this._triggerEventOnBehaviors('initialize', this, options);\n};\n\n_extend(CollectionView, { extend, setRenderer, setDomApi, setEventDelegator });\n\n_extend(CollectionView.prototype, ViewMixin, {\n  cidPrefix: 'mncv',\n\n  // flag for maintaining the sorted order of the collection\n  sortWithCollection: true,\n\n  // Internal method to set up the `children` object for storing all of the child views\n  // `_children` represents all child views\n  // `children` represents only views filtered to be shown\n  _initChildViewStorage() {\n    this._children = new ChildViewContainer();\n    this.children = new ChildViewContainer();\n  },\n\n  // Create an region to show the emptyView\n  getEmptyRegion() {\n    const emptyEl = this.container || this.el;\n\n    if (this._emptyRegion && !this._emptyRegion.isDestroyed()) {\n      this._emptyRegion._setElement(emptyEl);\n      return this._emptyRegion;\n    }\n\n    this._emptyRegion = new Region({ el: emptyEl, replaceElement: false });\n\n    this._emptyRegion._parentView = this;\n\n    return this._emptyRegion;\n  },\n\n  // Configured the initial events that the collection view binds to.\n  _initialEvents() {\n    if (this._isRendered) { return; }\n\n    this.listenTo(this.collection, {\n      'sort': this._onCollectionSort,\n      'reset': this._onCollectionReset,\n      'update': this._onCollectionUpdate\n    });\n  },\n\n  // Internal method. This checks for any changes in the order of the collection.\n  // If the index of any view doesn't match, it will re-sort.\n  _onCollectionSort(collection, { add, merge, remove }) {\n    if (!this.sortWithCollection || this.viewComparator === false) {\n      return;\n    }\n\n    // If the data is changing we will handle the sort later in `_onCollectionUpdate`\n    if (add || remove || merge) {\n      return;\n    }\n\n    // If the only thing happening here is sorting, sort.\n    this.sort();\n  },\n\n  _onCollectionReset() {\n    this._destroyChildren();\n\n    this._addChildModels(this.collection.models);\n\n    this.sort();\n  },\n\n  // Handle collection update model additions and  removals\n  _onCollectionUpdate(collection, options) {\n    const changes = options.changes;\n\n    // Remove first since it'll be a shorter array lookup.\n    const removedViews = changes.removed.length && this._removeChildModels(changes.removed);\n\n    this._addedViews = changes.added.length && this._addChildModels(changes.added);\n\n    this._detachChildren(removedViews);\n\n    this.sort();\n\n    // Destroy removed child views after all of the render is complete\n    this._removeChildViews(removedViews);\n  },\n\n  _removeChildModels(models) {\n    return reduce(models, (views, model) => {\n      const removeView = this._removeChildModel(model);\n\n      if (removeView) { views.push(removeView); }\n\n      return views;\n    }, []);\n  },\n\n  _removeChildModel(model) {\n    const view = this._children.findByModel(model);\n\n    if (view) { this._removeChild(view); }\n\n    return view;\n  },\n\n  _removeChild(view) {\n    this.triggerMethod('before:remove:child', this, view);\n\n    this.children._remove(view);\n    this._children._remove(view);\n\n    this.triggerMethod('remove:child', this, view);\n  },\n\n  // Added views are returned for consistency with _removeChildModels\n  _addChildModels(models) {\n    return map(models, this._addChildModel.bind(this));\n  },\n\n  _addChildModel(model) {\n    const view = this._createChildView(model);\n\n    this._addChild(view);\n\n    return view;\n  },\n\n  _createChildView(model) {\n    const ChildView = this._getChildView(model);\n    const childViewOptions = this._getChildViewOptions(model);\n    const view = this.buildChildView(model, ChildView, childViewOptions);\n\n    return view;\n  },\n\n  _addChild(view, index) {\n    this.triggerMethod('before:add:child', this, view);\n\n    this._setupChildView(view);\n    this._children._add(view, index);\n    this.children._add(view, index);\n\n    this.triggerMethod('add:child', this, view);\n  },\n\n  // Retrieve the `childView` class\n  // The `childView` property can be either a view class or a function that\n  // returns a view class. If it is a function, it will receive the model that\n  // will be passed to the view instance (created from the returned view class)\n  _getChildView(child) {\n    let childView = this.childView;\n\n    if (!childView) {\n      throw new MarionetteError({\n        name: classErrorName,\n        message: 'A \"childView\" must be specified',\n        url: 'marionette.collectionview.html#collectionviews-childview'\n      });\n    }\n\n    childView = this._getView(childView, child);\n\n    if (!childView) {\n      throw new MarionetteError({\n        name: classErrorName,\n        message: '\"childView\" must be a view class or a function that returns a view class',\n        url: 'marionette.collectionview.html#collectionviews-childview'\n      });\n    }\n\n    return childView;\n  },\n\n  // First check if the `view` is a view class (the common case)\n  // Then check if it's a function (which we assume that returns a view class)\n  _getView(view, child) {\n    if (isViewClass(view)) {\n      return view;\n    } else if (isFunction(view)) {\n      return view.call(this, child);\n    }\n  },\n\n  _getChildViewOptions(child) {\n    if (isFunction(this.childViewOptions)) {\n      return this.childViewOptions(child);\n    }\n\n    return this.childViewOptions;\n  },\n\n  // Build a `childView` for a model in the collection.\n  // Override to customize the build\n  buildChildView(child, ChildViewClass, childViewOptions) {\n    const options = _extend({model: child}, childViewOptions);\n    return new ChildViewClass(options);\n  },\n\n  _setupChildView(view) {\n    monitorViewEvents(view);\n\n    // We need to listen for if a view is destroyed in a way other\n    // than through the CollectionView.\n    // If this happens we need to remove the reference to the view\n    // since once a view has been destroyed we can not reuse it.\n    view.on('destroy', this.removeChildView, this);\n\n    // set up the child view event forwarding\n    this._proxyChildViewEvents(view);\n  },\n\n  // used by ViewMixin's `_childViewEventHandler`\n  _getImmediateChildren() {\n    return this.children._views;\n  },\n\n  // Overriding Backbone.View's `setElement` to handle\n  // if an el was previously defined. If so, the view might be\n  // attached on setElement.\n  setElement(element) {\n    this._undelegateViewEvents();\n    this.el = element;\n    this._setBehaviorElements();\n\n    this._isAttached = this._isElAttached();\n\n    this._delegateViewEvents();\n\n    return this;\n  },\n\n  // Render children views.\n  render() {\n    if (this._isDestroyed) { return this; }\n    this.triggerMethod('before:render', this);\n\n    this._destroyChildren();\n\n    if (this.collection) {\n      this._addChildModels(this.collection.models);\n      this._initialEvents();\n    }\n\n    const template = this.getTemplate();\n\n    if (template) {\n      this._renderTemplate(template);\n      this.bindUIElements();\n    }\n    this._getChildViewContainer();\n    this.sort();\n\n    this._isRendered = true;\n\n    this.triggerMethod('render', this);\n    return this;\n  },\n\n  // Get a container within the template to add the children within\n  _getChildViewContainer() {\n    const childViewContainer = result(this, 'childViewContainer');\n    this.container = childViewContainer ? this.$(childViewContainer)[0] : this.el;\n\n    if (!this.container) {\n      throw new MarionetteError({\n        name: classErrorName,\n        message: `The specified \"childViewContainer\" was not found: ${childViewContainer}`,\n        url: 'marionette.collectionview.html#defining-the-childviewcontainer'\n      });\n    }\n  },\n\n  // Sorts the children then filters and renders the results.\n  sort() {\n    this._sortChildren();\n\n    this.filter();\n\n    return this;\n  },\n\n  // Sorts views by viewComparator and sets the children to the new order\n  _sortChildren() {\n    if (!this._children.length) { return; }\n\n    let viewComparator = this.getComparator();\n\n    if (!viewComparator) { return; }\n\n    // If children are sorted prevent added to end perf\n    delete this._addedViews;\n\n    this.triggerMethod('before:sort', this);\n\n    this._children._sort(viewComparator, this);\n\n    this.triggerMethod('sort', this);\n  },\n\n  // Sets the view's `viewComparator` and applies the sort if the view is ready.\n  // To prevent the render pass `{ preventRender: true }` as the 2nd argument.\n  setComparator(comparator, {preventRender} = {}) {\n    const comparatorChanged = this.viewComparator !== comparator;\n    const shouldSort = comparatorChanged && !preventRender;\n\n    this.viewComparator = comparator;\n\n    if (shouldSort) {\n      this.sort();\n    }\n\n    return this;\n  },\n\n  // Clears the `viewComparator` and follows the same rules for rendering as `setComparator`.\n  removeComparator(options) {\n    return this.setComparator(null, options);\n  },\n\n  // If viewComparator is overridden it will be returned here.\n  // Additionally override this function to provide custom\n  // viewComparator logic\n  getComparator() {\n    if (this.viewComparator) { return this.viewComparator }\n\n    if (!this.sortWithCollection || this.viewComparator === false || !this.collection) {\n      return false;\n    }\n\n    return this._viewComparator;\n  },\n\n  // Default internal view comparator that order the views by\n  // the order of the collection\n  _viewComparator(view) {\n    return this.collection.indexOf(view.model);\n  },\n\n  // This method filters the children views and renders the results\n  filter() {\n    if (this._isDestroyed) { return this; }\n\n    this._filterChildren();\n\n    this._renderChildren();\n\n    return this;\n  },\n\n  _filterChildren() {\n    if (!this._children.length) { return; }\n\n    const viewFilter = this._getFilter();\n\n    if (!viewFilter) {\n      const shouldReset = this.children.length !== this._children.length;\n\n      this.children._set(this._children._views, shouldReset);\n\n      return;\n    }\n\n    // If children are filtered prevent added to end perf\n    delete this._addedViews;\n\n    this.triggerMethod('before:filter', this);\n\n    const attachViews = [];\n    const detachViews = [];\n\n    each(this._children._views, (view, key, children) => {\n      (viewFilter.call(this, view, key, children) ? attachViews : detachViews).push(view);\n    });\n\n    this._detachChildren(detachViews);\n\n    // reset children\n    this.children._set(attachViews, true);\n\n    this.triggerMethod('filter', this, attachViews, detachViews);\n  },\n\n  // This method returns a function for the viewFilter\n  _getFilter() {\n    const viewFilter = this.getFilter();\n\n    if (!viewFilter) { return false; }\n\n    if (isFunction(viewFilter)) {\n      return viewFilter;\n    }\n\n    // Support filter predicates `{ fooFlag: true }`\n    if (isObject(viewFilter)) {\n      const matcher = matches(viewFilter);\n      return function(view) {\n        return matcher(view.model && view.model.attributes);\n      };\n    }\n\n    // Filter by model attribute\n    if (isString(viewFilter)) {\n      return function(view) {\n        return view.model && view.model.get(viewFilter);\n      };\n    }\n\n    throw new MarionetteError({\n      name: classErrorName,\n      message: '\"viewFilter\" must be a function, predicate object literal, a string indicating a model attribute, or falsy',\n      url: 'marionette.collectionview.html#defining-the-viewfilter'\n    });\n  },\n\n  // Override this function to provide custom\n  // viewFilter logic\n  getFilter() {\n    return this.viewFilter;\n  },\n\n  // Sets the view's `viewFilter` and applies the filter if the view is ready.\n  // To prevent the render pass `{ preventRender: true }` as the 2nd argument.\n  setFilter(filter, {preventRender} = {}) {\n    const filterChanged = this.viewFilter !== filter;\n    const shouldRender = filterChanged && !preventRender;\n\n    this.viewFilter = filter;\n\n    if (shouldRender) {\n      this.filter();\n    }\n\n    return this;\n  },\n\n  // Clears the `viewFilter` and follows the same rules for rendering as `setFilter`.\n  removeFilter(options) {\n    return this.setFilter(null, options);\n  },\n\n  _detachChildren(detachingViews) {\n    each(detachingViews, this._detachChildView.bind(this));\n  },\n\n  _detachChildView(view) {\n    const shouldTriggerDetach = view._isAttached && this.monitorViewEvents !== false;\n    if (shouldTriggerDetach) {\n      view.triggerMethod('before:detach', view);\n    }\n\n    this.detachHtml(view);\n\n    if (shouldTriggerDetach) {\n      view._isAttached = false;\n      view.triggerMethod('detach', view);\n    }\n\n    view._isShown = false;\n  },\n\n  // Override this method to change how the collectionView detaches a child view\n  detachHtml(view) {\n    this.Dom.detachEl(view.el);\n  },\n\n  _renderChildren() {\n    // If there are unrendered views prevent add to end perf\n    if (this._hasUnrenderedViews) {\n      delete this._addedViews;\n      delete this._hasUnrenderedViews;\n    }\n\n    const views = this._addedViews || this.children._views;\n\n    this.triggerMethod('before:render:children', this, views);\n\n    if (this.isEmpty()) {\n      this._showEmptyView();\n    } else {\n      this._destroyEmptyView();\n\n      const els = this._getBuffer(views);\n\n      this._attachChildren(els, views);\n    }\n\n    delete this._addedViews;\n\n    this.triggerMethod('render:children', this, views);\n  },\n\n  // Renders each view and creates a fragment buffer from them\n  _getBuffer(views) {\n    const elBuffer = this.Dom.createBuffer();\n\n    each(views, view => {\n      renderView(view);\n      // corresponds that view is shown in a Region or CollectionView\n      view._isShown = true;\n      this.Dom.appendContents(elBuffer, view.el);\n    });\n\n    return elBuffer;\n  },\n\n  _attachChildren(els, views) {\n    const shouldTriggerAttach = this._isAttached && this.monitorViewEvents !== false;\n\n    views = shouldTriggerAttach ? views : [];\n\n    each(views, view => {\n      if (view._isAttached) { return; }\n      view.triggerMethod('before:attach', view);\n    });\n\n    this.attachHtml(els, this.container);\n\n    each(views, view => {\n      if (view._isAttached) { return; }\n      view._isAttached = true;\n      view.triggerMethod('attach', view);\n    });\n  },\n\n  // Override this method to do something other than `.append`.\n  // You can attach any HTML at this point including the els.\n  attachHtml(els, container) {\n    this.Dom.appendContents(container, els);\n  },\n\n  isEmpty() {\n    return !this.children.length;\n  },\n\n  _showEmptyView() {\n    const EmptyView = this._getEmptyView();\n\n    if (!EmptyView) {\n      return;\n    }\n\n    const options = this._getEmptyViewOptions();\n\n    const emptyRegion = this.getEmptyRegion();\n\n    emptyRegion.show(new EmptyView(options));\n  },\n\n  // Retrieve the empty view class\n  _getEmptyView() {\n    const emptyView = this.emptyView;\n\n    if (!emptyView) { return; }\n\n    return this._getView(emptyView);\n  },\n\n  // Remove the emptyView\n  _destroyEmptyView() {\n    const emptyRegion = this.getEmptyRegion();\n    // Only empty if a view is show so the region\n    // doesn't detach any other unrelated HTML\n    if (emptyRegion.hasView()) {\n      emptyRegion.empty();\n    }\n  },\n\n  //\n  _getEmptyViewOptions() {\n    const emptyViewOptions = this.emptyViewOptions || this.childViewOptions;\n\n    if (isFunction(emptyViewOptions)) {\n      return emptyViewOptions.call(this);\n    }\n\n    return emptyViewOptions;\n  },\n\n  swapChildViews(view1, view2) {\n    if (!this._children.hasView(view1) || !this._children.hasView(view2)) {\n      throw new MarionetteError({\n        name: classErrorName,\n        message: 'Both views must be children of the collection view to swap.',\n        url: 'marionette.collectionview.html#swapping-child-views'\n      });\n    }\n\n    this._children._swap(view1, view2);\n    this.Dom.swapEl(view1.el, view2.el);\n\n    // If the views are not filtered the same, refilter\n    if (this.children.hasView(view1) !== this.children.hasView(view2)) {\n      this.filter();\n    } else {\n      this.children._swap(view1, view2);\n    }\n\n    return this;\n  },\n\n  // Render the child's view and add it to the HTML for the collection view at a given index, based on the current sort\n  addChildView(view, index, options = {}) {\n    if (!view || view._isDestroyed) {\n      return view;\n    }\n\n    if (view._isShown) {\n      throw new MarionetteError({\n        name: classErrorName,\n        message: 'View is already shown in a Region or CollectionView',\n        url: 'marionette.region.html#showing-a-view'\n      });\n    }\n\n    if (isObject(index)) {\n      options = index;\n    }\n\n    // If options has defined index we should use it\n    if (options.index != null) {\n      index = options.index;\n    }\n\n    if (!this._isRendered) {\n      this.render();\n    }\n\n    this._addChild(view, index);\n\n    if (options.preventRender) {\n      this._hasUnrenderedViews = true;\n      return view;\n    }\n\n    const hasIndex = (typeof index !== 'undefined');\n    const isAddedToEnd = !hasIndex || index >= this._children.length;\n\n    // Only cache views if added to the end and there is no unrendered views\n    if (isAddedToEnd && !this._hasUnrenderedViews) {\n      this._addedViews = [view];\n    }\n\n    if (hasIndex) {\n      this._renderChildren();\n    } else {\n      this.sort();\n    }\n\n    return view;\n  },\n\n  // Detach a view from the children.  Best used when adding a\n  // childView from `addChildView`\n  detachChildView(view) {\n    this.removeChildView(view, { shouldDetach: true });\n\n    return view;\n  },\n\n  // Remove the child view and destroy it.  Best used when adding a\n  // childView from `addChildView`\n  // The options argument is for internal use only\n  removeChildView(view, options) {\n    if (!view) {\n      return view;\n    }\n\n    this._removeChildView(view, options);\n\n    this._removeChild(view);\n\n    if (this.isEmpty()) {\n      this._showEmptyView();\n    }\n\n    return view;\n  },\n\n  _removeChildViews(views) {\n    each(views, this._removeChildView.bind(this));\n  },\n\n  _removeChildView(view, {shouldDetach} = {}) {\n    view.off('destroy', this.removeChildView, this);\n\n    if (shouldDetach) {\n      this._detachChildView(view);\n    } else {\n      this._destroyChildView(view);\n    }\n\n    this.stopListening(view);\n  },\n\n  _destroyChildView(view) {\n    if (view._isDestroyed) {\n      return;\n    }\n\n    const shouldDisableEvents = this.monitorViewEvents === false;\n    destroyView(view, shouldDisableEvents);\n  },\n\n  // called by ViewMixin destroy\n  _removeChildren() {\n    this._destroyChildren();\n    const emptyRegion = this.getEmptyRegion();\n    emptyRegion.destroy();\n    delete this._addedViews;\n  },\n\n  // Destroy the child views that this collection view is holding on to, if any\n  _destroyChildren() {\n    if (!this._children.length) {\n      return;\n    }\n\n    this.triggerMethod('before:destroy:children', this);\n    if (this.monitorViewEvents === false) {\n      this.Dom.detachContents(this.el);\n    }\n\n    this._removeChildViews(this._children._views);\n\n    // After all children have been destroyed re-init the container\n    this._children._init();\n    this.children._init();\n\n    this.triggerMethod('destroy:children', this);\n  }\n});\n\n\nexport default CollectionView;\n","// Behavior\n// --------\n\n// A Behavior is an isolated set of DOM /\n// user interactions that can be mixed into any View.\n// Behaviors allow you to blackbox View specific interactions\n// into portable logical chunks, keeping your views simple and your code DRY.\n\nimport { extend as _extend, uniqueId, result } from 'underscore';\nimport extend from '../utils/extend';\nimport CommonMixin from '../mixins/common';\nimport DelegateEntityEventsMixin from '../mixins/delegate-entity-events';\nimport UIMixin from '../mixins/ui';\nimport ViewEventsMixin from '../mixins/view-events';\n\nconst ClassOptions = [\n  'collectionEvents',\n  'events',\n  'modelEvents',\n  'triggers',\n  'ui'\n];\n\nconst Behavior = function(options, view) {\n  // Setup reference to the view.\n  // this comes in handle when a behavior\n  // wants to directly talk up the chain\n  // to the view.\n  this.view = view;\n\n\n  this._setOptions(options, ClassOptions);\n  this.cid = uniqueId(this.cidPrefix);\n\n  this._initViewEvents();\n  this.setElement();\n\n  // Construct an internal UI hash using the behaviors UI\n  // hash combined and overridden by the view UI hash.\n  // This allows the user to use UI hash elements defined\n  // in the parent view as well as those defined in the behavior.\n  // This order will help the reuse and share of a behavior\n  // between multiple views, while letting a view override\n  // a selector under an UI key.\n  this.ui = _extend({}, result(this, 'ui'), result(view, 'ui'));\n\n  // Proxy view triggers\n  this.listenTo(view, 'all', this.triggerMethod);\n\n  this.initialize.apply(this, arguments);\n};\n\nBehavior.extend = extend;\n\n// Behavior Methods\n// --------------\n\n_extend(Behavior.prototype, CommonMixin, DelegateEntityEventsMixin, UIMixin, ViewEventsMixin, {\n  cidPrefix: 'mnb',\n\n  // proxy behavior $ method to the view\n  // this is useful for doing jquery DOM lookups\n  // scoped to behaviors view.\n  $() {\n    return this.view.$.apply(this.view, arguments);\n  },\n\n  // Stops the behavior from listening to events.\n  destroy() {\n    this._undelegateViewEvents();\n\n    this.stopListening();\n\n    this.view._removeBehavior(this);\n\n    this._deleteEntityEventHandlers();\n\n    return this;\n  },\n\n  setElement() {\n    this._undelegateViewEvents();\n\n    this.el = this.view.el;\n\n    this._delegateViewEvents(this.view);\n\n    return this;\n  },\n\n  bindUIElements() {\n    this._bindUIElements();\n\n    return this;\n  },\n\n  unbindUIElements() {\n    this._unbindUIElements();\n\n    return this;\n  },\n\n  getUI(name) {\n    return this._getUI(name);\n  },\n\n  // Handle `modelEvents`, and `collectionEvents` configuration\n  delegateEntityEvents() {\n    this._delegateEntityEvents(this.view.model, this.view.collection);\n\n    return this;\n  },\n\n  undelegateEntityEvents() {\n    this._undelegateEntityEvents(this.view.model, this.view.collection);\n\n    return this;\n  }\n});\n\nexport default Behavior;\n","// Application\n// -----------\n\nimport { extend as _extend, uniqueId } from 'underscore';\nimport extend from '../utils/extend';\nimport buildRegion from './common/build-region';\nimport CommonMixin from '../mixins/common';\nimport DestroyMixin from '../mixins/destroy';\nimport RadioMixin from '../mixins/radio';\nimport Region from './region';\n\nconst ClassOptions = [\n  'channelName',\n  'radioEvents',\n  'radioRequests',\n  'region',\n  'regionClass'\n];\n\nconst Application = function(options) {\n  this._setOptions(options, ClassOptions);\n  this.cid = uniqueId(this.cidPrefix);\n  this._initRegion();\n  this._initRadio();\n  this.initialize.apply(this, arguments);\n};\n\nApplication.extend = extend;\n\n// Application Methods\n// --------------\n\n_extend(Application.prototype, CommonMixin, DestroyMixin, RadioMixin, {\n  cidPrefix: 'mna',\n\n  // Kick off all of the application's processes.\n  start(options) {\n    this.triggerMethod('before:start', this, options);\n    this.triggerMethod('start', this, options);\n    return this;\n  },\n\n  regionClass: Region,\n\n  _initRegion() {\n    const region = this.region;\n\n    if (!region) { return; }\n\n    const defaults = {\n      regionClass: this.regionClass\n    };\n\n    this._region = buildRegion(region, defaults);\n  },\n\n  getRegion() {\n    return this._region;\n  },\n\n  showView(view, ...args) {\n    const region = this.getRegion();\n    region.show(view, ...args);\n    return view;\n  },\n\n  getView() {\n    return this.getRegion().currentView;\n  }\n});\n\nexport default Application;\n","import proxy from './utils/proxy.js';\nimport extend from './utils/extend';\nimport { version as VERSION } from './version';\n\nimport {\n  bindEvents as _bindEvents,\n  unbindEvents as _unbindEvents\n} from './modules/common/bind-events.js';\nimport {\n  bindRequests as _bindRequests,\n  unbindRequests as _unbindRequests\n} from './modules/common/bind-requests';\nimport _getOption from './modules/common/get-option';\nimport _mergeOptions from './modules/common/merge-options';\nimport monitorViewEvents from './modules/common/monitor-view-events';\nimport _normalizeMethods from './modules/common/normalize-methods';\nimport _triggerMethod from './modules/common/trigger-method';\n\nimport Events from './mixins/events';\nimport Requests from './mixins/requests';\n\nimport MnObject from './modules/object';\nimport View from './modules/view';\nimport CollectionView from './modules/collection-view';\nimport Behavior from './modules/behavior';\nimport Region from './modules/region';\nimport Application from './modules/application';\nimport Radio from './modules/radio';\n\nimport DomApi from './config/dom';\n\nimport {\n  isEnabled,\n  setEnabled\n} from './config/features';\n\n// Utilities\n\nexport const bindEvents = proxy(_bindEvents);\nexport const unbindEvents = proxy(_unbindEvents);\nexport const bindRequests = proxy(_bindRequests);\nexport const unbindRequests = proxy(_unbindRequests);\nexport const mergeOptions = proxy(_mergeOptions);\nexport const getOption = proxy(_getOption);\nexport const normalizeMethods = proxy(_normalizeMethods);\nexport const triggerMethod = proxy(_triggerMethod);\n\n\n// Configuration\n\nexport const setDomApi = function(mixin) {\n  CollectionView.setDomApi(mixin);\n  Region.setDomApi(mixin);\n  View.setDomApi(mixin);\n};\nexport const setRenderer = function(renderer) {\n  CollectionView.setRenderer(renderer);\n  View.setRenderer(renderer);\n};\n\nexport const setEventDelegator = function(delegator) {\n  CollectionView.setEventDelegator(delegator);\n  View.setEventDelegator(delegator);\n};\n\nexport {\n  View,\n  CollectionView,\n  MnObject,\n  Region,\n  Behavior,\n  Application,\n  Radio,\n  isEnabled,\n  setEnabled,\n  monitorViewEvents,\n  Events,\n  Requests,\n  extend,\n  DomApi,\n  VERSION,\n};\n"],"names":["proxy","method","context","args","apply","protoProps","staticProps","parent","child","has","constructor","arguments","extend","prototype","create","__super__","version","normalizeMethods","hash","reduce","normalizedHash","name","isFunction","errorProps","MarionetteError","call","Error","urlRoot","url","options","error","message","_extend","pick","captureStackTrace","toString","normalizeBindings","bindings","isObject","bindEvents","entity","listenTo","unbindEvents","stopListening","bindRequests","channel","reply","unbindRequests","stopReplying","getOption","optionName","undefined","mergeOptions","keys","each","key","option","triggerMethodChildren","view","event","shouldTrigger","_getImmediateChildren","triggerMethod","shouldTriggerAttach","_isAttached","shouldAttach","shouldTriggerDetach","shouldDetach","triggerDOMRefresh","_isRendered","triggerDOMRemove","handleBeforeAttach","handleAttach","handleBeforeDetach","handleDetach","handleBeforeRender","handleRender","monitorViewEvents","_areViewEventsMonitored","on","splitter","methodCache","getEventName","match","prefix","eventName","toUpperCase","getOnMethodName","replace","methodName","result","trigger","eventSplitter","buildEventArgs","callback","listener","eventArgs","concat","test","split","n","push","callHandler","length","onceWrap","offCallback","onceCallback","once","_callback","onApi","events","ctx","handlers","onReducer","onceReducer","off","bind","cleanupListener","obj","listeneeId","listenerId","listeningTo","_listeners","offReducer","names","remaining","handler","count","getListener","listenerObj","_listenId","uniqueId","_events","_listeningTo","listenToApi","listeners","_internal","listenToOnceApi","triggerApi","objEvents","allEvents","all","slice","triggerEvents","opts","listenToOnce","listenerIds","i","listenToObj","makeCallback","replyReducer","isOnce","requests","stopReducer","_requests","replyOnce","request","replies","default","CommonMixin","initialize","_setOptions","classOptions","EventsMixin","RequestsMixin","_isDestroyed","isDestroyed","destroy","Radio","DEBUG","debugText","warning","channelName","debugLog","console","warn","_logs","_partial","log","tuneIn","_tunedIn","tuneOut","_channels","Channel","Events","Requests","reset","system","channels","_initRadio","_channel","radioEvents","radioRequests","_destroyRadio","getChannel","ClassOptions","MarionetteObject","cid","cidPrefix","DestroyMixin","RadioMixin","getBehaviorClass","behaviorClass","BehaviorClass","parseBehaviors","behaviors","allBehaviors","reducedBehaviors","behaviorDefiniton","behavior","_initBehaviors","_behaviors","_getBehaviorTriggers","triggers","map","_getTriggers","memo","_triggers","_getBehaviorEvents","_getEvents","_setBehaviorElements","setElement","_delegateBehaviorEntityEvents","delegateEntityEvents","_undelegateBehaviorEntityEvents","undelegateEntityEvents","_destroyBehaviors","_removeBehavior","undelegate","without","_bindBehaviorUIElements","bindUIElements","_unbindBehaviorUIElements","unbindUIElements","_triggerEventOnBehaviors","_delegateEntityEvents","model","collection","_modelEvents","_collectionEvents","_undelegateEntityEvents","_deleteEntityEventHandlers","_renderTemplate","template","data","mixinTemplateContext","serializeData","html","_renderHtml","attachElContent","getTemplate","serializedData","templateContext","serializeModel","items","serializeCollection","attributes","models","Dom","setContents","el","normalizeUIKeys","ui","val","normalizedKey","normalizeUIString","uiRegEx","uiString","r","normalizeUIValues","property","isString","propertyVal","uiBindings","_getUIBindings","_bindUIElements","_uiBindings","_ui","selector","$","_unbindUIElements","$el","_getUI","FEATURES","childViewEventPrefix","triggersStopPropagation","triggersPreventDefault","DEV_MODE","isEnabled","setEnabled","state","setEventDelegator","mixin","EventDelegator","shouldCapture","indexOf","delegate","rootEl","delegateHandler","evt","node","target","parentNode","Element","matches","delegateTarget","addEventListener","undelegateAll","removeEventListener","delegateEventSplitter","buildViewTrigger","triggerDef","shouldPreventDefault","preventDefault","shouldStopPropagation","stopPropagation","_initViewEvents","_domEvents","_undelegateViewEvents","_delegateViewEvents","_delegateEvents","_delegateTriggers","_delegate","value","setDomApi","createElement","tagName","document","createBuffer","createDocumentFragment","getDocumentEl","ownerDocument","documentElement","findEl","querySelectorAll","hasEl","childEl","contains","detachEl","removeChild","replaceEl","newEl","oldEl","replaceChild","swapEl","el1","el2","parent1","parent2","next1","nextSibling","next2","insertBefore","innerHTML","setAttributes","attrs","attr","setAttribute","appendContents","contents","appendChild","hasContents","hasChildNodes","detachContents","textContent","ViewMixin","preinitialize","DomApi","_getEl","id","className","class","_isElAttached","supportsRenderLifecycle","supportsDestroyLifecycle","isRendered","isAttached","_isDestroying","_disableDetachEvents","_removeChildren","getUI","_buildEventProxies","_childViewEvents","_childViewTriggers","_eventPrefix","_getEventPrefix","defaultPrefix","_proxyChildViewEvents","_childViewEventHandler","childViewEvents","childViewTriggers","BehaviorsMixin","DelegateEntityEventsMixin","TemplateRenderMixin","UIMixin","ViewEvents","isView","render","remove","isViewClass","ViewClass","renderView","destroyView","disableDetachEvents","classErrorName","Region","_initEl","replaceElement","_isReplaced","_isSwappingView","show","_ensureElement","_getView","currentView","_isShown","empty","_setupChildView","_attachView","_setEl","getEl","_setElement","shouldReplace","_restoreEl","_replaceEl","attachHtml","_empty","parentView","_parentView","_shouldDisableMonitoring","shouldReplaceEl","allowMissingEl","viewOptions","_getViewOptions","View","_detachView","isReplaced","isSwappingView","detachHtml","shouldDestroy","removeView","_stopChildViewEvents","detachView","shouldRestoreEl","hasView","_name","_removeReferences","definition","defaults","buildRegionFromObject","regionClass","RegionClass","_initRegions","regions","_regions","addRegions","_reInitRegions","region","addRegion","isEmpty","_addRegions","regionDefinitions","parentEl","partial","buildRegion","_addRegion","removeRegion","_removeRegion","removeRegions","_getRegions","emptyRegions","getRegions","hasRegion","getRegion","clone","showChildView","detachChildView","getChildView","setRenderer","renderer","childReducer","children","RegionsMixin","element","_","forEach","find","detect","filter","select","reject","every","some","any","include","invoke","toArray","first","initial","rest","last","pluck","partition","Container","_init","methods","_views","stringComparator","comparator","get","_viewsByCid","_indexByModel","_updateLength","_add","index","_addViewIndexes","splice","_sort","_sortBy","sort","sortedViews","sortBy","_set","views","shouldReset","_swap","view1","view2","view1Index","findIndexByView","view2Index","swapView","findByModel","findByModelCid","modelCid","findByIndex","findByCid","_remove","CollectionView","_initChildViewStorage","getEmptyRegion","sortWithCollection","_children","ChildViewContainer","emptyEl","container","_emptyRegion","_initialEvents","_onCollectionSort","_onCollectionReset","_onCollectionUpdate","add","merge","viewComparator","_destroyChildren","_addChildModels","changes","removedViews","removed","_removeChildModels","_addedViews","added","_detachChildren","_removeChildViews","_removeChildModel","_removeChild","_addChildModel","_createChildView","_addChild","ChildView","_getChildView","childViewOptions","_getChildViewOptions","buildChildView","childView","ChildViewClass","removeChildView","_getChildViewContainer","childViewContainer","_sortChildren","getComparator","setComparator","preventRender","comparatorChanged","shouldSort","removeComparator","_viewComparator","_filterChildren","_renderChildren","viewFilter","_getFilter","attachViews","detachViews","getFilter","matcher","setFilter","filterChanged","shouldRender","removeFilter","detachingViews","_detachChildView","_hasUnrenderedViews","_showEmptyView","_destroyEmptyView","els","_getBuffer","_attachChildren","elBuffer","EmptyView","_getEmptyView","_getEmptyViewOptions","emptyRegion","emptyView","emptyViewOptions","swapChildViews","addChildView","hasIndex","isAddedToEnd","_removeChildView","_destroyChildView","shouldDisableEvents","Behavior","ViewEventsMixin","Application","_initRegion","start","_region","showView","getView","_bindEvents","_unbindEvents","_bindRequests","_unbindRequests","_mergeOptions","_getOption","_normalizeMethods","_triggerMethod","delegator"],"mappings":"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"}