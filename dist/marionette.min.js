!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("underscore")):"function"==typeof define&&define.amd?define(["exports","underscore"],t):(e="undefined"!=typeof globalThis?globalThis:e||self,function(){var i=e.Marionette,n=e.Marionette={};t(n,e._),n.noConflict=function(){return e.Marionette=i,n}}())}(this,(function(e,t){"use strict";var i=function(e){return function(t){for(var i=arguments.length,n=new Array(i>1?i-1:0),s=1;s<i;s++)n[s-1]=arguments[s];return e.apply(t,n)}};function n(e,i){var n,s=this;return n=e&&t.has(e,"constructor")?e.constructor:function(){return s.apply(this,arguments)},t.extend(n,s,i),n.prototype=t.create(s.prototype,e),n.prototype.constructor=n,n.__super__=s.prototype,n}var s="5.0.0-alpha.2",r=function(e){var i=this;if(e)return t.reduce(e,(function(e,n,s){return t.isFunction(n)||(n=i[n]),n&&(e[s]=n),e}),{})},o=["description","fileName","lineNumber","name","message","number","url"],h=n.call(Error,{urlRoot:"http://marionettejs.com/docs/v".concat(s,"/"),url:"",constructor:function(e){var i=Error.call(this,e.message);t.extend(this,t.pick(i,o),t.pick(e,o)),Error.captureStackTrace&&this.captureStackTrace(),this.url=this.urlRoot+this.url},captureStackTrace:function(){Error.captureStackTrace(this,h)},toString:function(){return"".concat(this.name,": ").concat(this.message," See: ").concat(this.url)}});function a(e,i){if(!t.isObject(i))throw new h({message:"Bindings must be an object.",url:"common.html#bindevents"});return r.call(e,i)}function l(e,t){return e&&t?(this.listenTo(e,a(this,t)),this):this}function d(e,t){return e?t?(this.stopListening(e,a(this,t)),this):(this.stopListening(e),this):this}function c(e,i){if(!t.isObject(i))throw new h({message:"Bindings must be an object.",url:"common.html#bindrequests"});return r.call(e,i)}function u(e,t){return e&&t?(e.reply(c(this,t),this),this):this}function f(e,t){return e?t?(e.stopReplying(c(this,t)),this):(e.stopReplying(null,null,this),this):this}var v=function(e){if(e)return this.options&&void 0!==this.options[e]?this.options[e]:this[e]},_=function(e,i){var n=this;e&&t.each(i,(function(t){var i=e[t];void 0!==i&&(n[t]=i)}))};function g(e,i,n){e._getImmediateChildren&&t.each(e._getImmediateChildren(),(function(e){n(e)&&e.triggerMethod(i,e)}))}function m(e){return!e._isAttached}function p(e){return!!m(e)&&(e._isAttached=!0,!0)}function w(e){return e._isAttached}function E(e){return e._isAttached=!1,!0}function y(e){e._isAttached&&e._isRendered&&e.triggerMethod("dom:refresh",e)}function b(e){e._isAttached&&e._isRendered&&e.triggerMethod("dom:remove",e)}function V(){g(this,"before:attach",m)}function C(){g(this,"attach",p),y(this)}function R(){g(this,"before:detach",w),b(this)}function x(){g(this,"detach",E)}function M(){b(this)}function D(){y(this)}function I(e){e._areViewEventsMonitored||!1===e.monitorViewEvents||(e._areViewEventsMonitored=!0,e.on({"before:attach":V,attach:C,"before:detach":R,detach:x,"before:render":M,render:D}))}var B=/(^|:)(\w)/gi,A={};function k(e,t,i){return i.toUpperCase()}var O=function(e){return A[e]||(A[e]="on"+e.replace(B,k)),A[e]};function S(e){for(var i=arguments.length,n=new Array(i>1?i-1:0),s=1;s<i;s++)n[s-1]=arguments[s];var r,o=O(e),h=v.call(this,o);return t.isFunction(h)&&(r=h.apply(this,n)),this.trigger.apply(this,arguments),r}function U(e){return(U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function T(e){return function(e){if(Array.isArray(e))return L(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return L(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return L(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var q=/\s+/;function P(e,i,n,s){return e&&"object"===U(e)?t.reduce(t.keys(e),(function(t,r){return t.concat(P(r,e[r],n||i,s))}),[]):e&&q.test(e)?t.reduce(e.split(q),(function(e,t){return e.push({name:t,callback:i,context:n,listener:s}),e}),[]):[{name:e,callback:i,context:n,listener:s}]}function N(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];switch(i.length){case 0:return e.call(t);case 1:return e.call(t,i[0]);case 2:return e.call(t,i[0],i[1]);case 3:return e.call(t,i[0],i[1],i[2]);default:return e.apply(t,i)}}function j(e,i){var n=t.once((function(){return i(n),e.apply(this,arguments)}));return n._callback=e,n}var z=function(e){var t=e.events,i=e.name,n=e.callback,s=e.context,r=e.ctx,o=e.listener;return(t[i]||(t[i]=[])).push({callback:n,context:s,ctx:s||r,listener:o}),t},F=function(e,t){var i=t.name,n=t.callback,s=t.context;return n?z({events:e,name:i,callback:n,context:s,ctx:this}):e},H=function(e,t){var i=t.name,n=t.callback,s=t.context;if(!n)return e;var r=j(n,this.off.bind(this,i));return z({events:e,name:i,callback:r,context:s,ctx:this})},$=function(e){var t=e.obj,i=e.listeneeId,n=e.listenerId;delete e.listeningTo[i],delete t._rdListeners[n]},W=function(e,i){var n=i.name,s=i.callback,r=i.context,o=n?[n]:t.keys(e);return t.each(o,(function(i){var n=e[i];n&&(e[i]=t.reduce(n,(function(e,t){if(s&&s!==t.callback&&s!==t.callback._callback||r&&r!==t.context)return e.push(t),e;if(t.listener){var i=t.listener;i.count--,i.count||$(i)}return e}),[]),e[i].length||delete e[i])})),e},Y=function(e,i){var n=e._rdListenId||(e._rdListenId=t.uniqueId("l"));e._rdEvents=e._rdEvents||{};var s=i._rdListeningTo||(i._rdListeningTo={}),r=s[n];if(!r){var o=i._rdListenId||(i._rdListenId=t.uniqueId("l"));return s[n]={obj:e,listeneeId:n,listenerId:o,listeningTo:s,count:0},s[n]}return r},K=function(e){var t=e.name,i=e.callback,n=e.context,s=e.listener;if(i){var r=s.obj,o=s.listenerId,h=r._rdListeners||(r._rdListeners={});r._rdEvents=z({events:r._rdEvents,name:t,callback:i,context:n,listener:s}),h[o]=s,s.count++,r.on(t,i,n,{_rdInternal:!0})}},Z=function(e){var t=e.name,i=e.callback,n=e.context,s=e.listener;if(i){var r=j(i,this.stopListening.bind(this,s.obj,t));K({name:t,callback:r,context:n,listener:s})}},G=function(e){var t=e.events,i=e.name,n=e.args,s=t[i],r=s&&t.all?t.all.slice():t.all;s&&J(s,n),r&&J(r,[i].concat(n))},J=function(e,i){t.each(e,(function(e){N(e.callback,e.ctx,i)}))},Q={on:function(e,i,n,s){if(!s||!s._rdInternal){var r=P(e,i,n);return this._rdEvents=t.reduce(r,F.bind(this),this._rdEvents||{}),this}},off:function(e,i,n,s){if(!this._rdEvents)return this;if(!s||!s._rdInternal){if(!e&&!n&&!i){this._rdEvents=void 0;var r=this._rdListeners;return t.each(t.keys(r),(function(e){$(r[e])})),this}var o=P(e,i,n);return this._rdEvents=t.reduce(o,W,this._rdEvents),this}},once:function(e,i,n){var s=P(e,i,n);return this._rdEvents=t.reduce(s,H.bind(this),this._rdEvents||{}),this},listenTo:function(e,i,n){if(!e)return this;var s=P(i,n,this,Y(e,this));return t.each(s,K),this},listenToOnce:function(e,i,n){if(!e)return this;var s=P(i,n,this,Y(e,this));return t.each(s,Z.bind(this)),this},stopListening:function(e,i,n){var s=this,r=this._rdListeningTo;if(!r)return this;for(var o=P(i,n,this),h=e?[e._rdListenId]:t.keys(r),a=function(e){var i=r[h[e]];if(!i)return"break";t.each(o,(function(e){var t=i.obj,n=t._rdEvents;n&&(t._rdEvents=W(n,e),t.off(e.name,e.callback,s,{_reInternal:!0}))}))},l=0;l<h.length;l++){if("break"===a(l))break}return this},trigger:function(e){for(var i=this,n=arguments.length,s=new Array(n>1?n-1:0),r=1;r<n;r++)s[r-1]=arguments[r];return this._rdEvents?(e&&"object"===U(e)&&t.each(t.keys(e),(function(t){G({events:i._rdEvents,name:t,args:[e[t]]})})),e&&q.test(e)?(t.each(e.split(q),(function(e){G({events:i._rdEvents,name:e,args:s})})),this):(G({events:this._rdEvents,name:e,args:s}),this)):this},triggerMethod:S},X=!1;function ee(e,t,i){X&&console&&console.warn&&console.warn(function(e,t,i){return e+(i?" on the ".concat(i," channel"):"")+': "'.concat(t,'"')}(e,t,i))}function te(e,t){if("undefined"!=typeof console){for(var i=arguments.length,n=new Array(i>2?i-2:0),s=2;s<i;s++)n[s-2]=arguments[s];console.log("[".concat(e,'] "').concat(t,'"'),n)}}function ie(e){if("function"==typeof e)return e;var t=function(){return e};return t._callback=e,t}var ne=function(e,t,i){var n=i.name,s=i.callback,r=i.context;return t[n]&&ee("A request was overwritten",n,this.channelName),t[n]={callback:e?j(ie(s),this.stopReplying.bind(this,n)):ie(s),context:r||this},t},se=function(e,i){var n=i.name,s=i.callback,r=i.context,o=n?[n]:t.keys(e);return t.each(o,(function(t){var i=e[t];!i||s&&s!==i.callback&&s!==i.callback._callback||r&&r!==i.context||delete e[t]})),e},re={reply:function(e,i,n){var s=P(e,i,n);return this._rdRequests=t.reduce(s,ne.bind(this,!1),this._rdRequests||{}),this},replyOnce:function(e,i,n){var s=P(e,i,n);return this._rdRequests=t.reduce(s,ne.bind(this,!0),this._rdRequests||{}),this},stopReplying:function(e,i,n){if(!this._rdRequests)return this;if(!e&&!i&&!n)return delete this._rdRequests,this;var s=P(e,i,n);return this._rdRequests=t.reduce(s,se.bind(this),this._rdRequests||{}),this},request:function(e){for(var i=this,n=arguments.length,s=new Array(n>1?n-1:0),r=1;r<n;r++)s[r-1]=arguments[r];if(e&&"object"===U(e))return t.reduce(t.keys(e),(function(n,s){var r=i.request(s,e[s]);return q.test(s)?t.extend(n,r):n[s]=r,n}),{});if(e&&q.test(e))return t.reduce(e.split(q),(function(e,t){return e[t]=i.request.apply(i,[t].concat(T(s))),e}),{});var o=this.channelName,h=this._rdRequests;if(o&&this._tunedIn&&te.apply(this,[o,e].concat(s)),h&&(h[e]||h.default)){var a=h[e]||h.default;return s=h[e]?s:arguments,N(a.callback,a.context,s)}ee("An unhandled request was fired",e,o)}},oe={initialize:function(){},normalizeMethods:r,_setOptions:function(e,i){this.options=t.extend({},t.result(this,"options"),e),this.mergeOptions(e,i)},mergeOptions:_,getOption:v,bindEvents:l,unbindEvents:d,bindRequests:u,unbindRequests:f,triggerMethod:S};t.extend(oe,Q,re);var he={_isDestroyed:!1,isDestroyed:function(){return this._isDestroyed},destroy:function(e){return this._isDestroyed||(this.triggerMethod("before:destroy",this,e),this._isDestroyed=!0,this.triggerMethod("destroy",this,e),this.stopListening()),this}},ae={};function le(e){return ae[e]||(ae[e]=te.bind(de,e))}var de={};t.extend(de,{setDebug:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];X=e},log:te,debugLog:ee,tuneIn:function(e){var t=de.channel(e);return t._tunedIn=!0,t.on("all",le(e)),this},tuneOut:function(e){var t=de.channel(e);return t._tunedIn=!1,t.off("all",le(e)),delete ae[e],this}}),de._channels={},de.channel=function(e){if(!e)throw new Error("You must provide a name for the channel.");return de._channels[e]?de._channels[e]:de._channels[e]=new de.Channel(e)},de.Channel=function(e){this.channelName=e},t.extend(de.Channel.prototype,Q,re,{reset:function(){return this.off(),this.stopListening(),this.stopReplying(),this}}),t.each([Q,re],(function(e){t.each(t.keys(e),(function(e){de[e]=function(t){for(var i=this.channel(t),n=arguments.length,s=new Array(n>1?n-1:0),r=1;r<n;r++)s[r-1]=arguments[r];return N(i[e],i,s)}}))})),de.reset=function(e){var i=e?[this._channels[e]]:this._channels;t.each(i,(function(e){e.reset()}))};var ce={_initRadio:function(){var e=t.result(this,"channelName");if(e){var i=this._channel=de.channel(e),n=t.result(this,"radioEvents");this.bindEvents(i,n);var s=t.result(this,"radioRequests");this.bindRequests(i,s),this.on("destroy",this._destroyRadio)}},_destroyRadio:function(){this._channel.stopReplying(null,null,this)},getChannel:function(){return this._channel}},ue=["channelName","radioEvents","radioRequests"],fe=function(e){this._setOptions(e,ue),this.cid=t.uniqueId(this.cidPrefix),this._initRadio(),this.initialize.apply(this,arguments)};function ve(e,i,n){return t.reduce(i,(function(i,n){var s=function(e){if(e.behaviorClass)return{BehaviorClass:e.behaviorClass,options:e};if(t.isFunction(e))return{BehaviorClass:e,options:{}};throw new h({message:"Unable to get behavior class. A Behavior constructor should be passed directly or as behaviorClass property of options",url:"marionette.behavior.html#defining-and-attaching-behaviors"})}(n),r=new(0,s.BehaviorClass)(s.options,e);return i.push(r),ve(e,t.result(r,"behaviors"),i)}),n)}fe.extend=n,t.extend(fe.prototype,oe,he,ce,{cidPrefix:"mno"});var _e={_initBehaviors:function(){this._behaviors=ve(this,t.result(this,"behaviors"),[])},_getBehaviorTriggers:function(){var e=t.map(this._behaviors,(function(e){return e._getTriggers()}));return t.reduce(e,(function(e,i){return t.extend(e,i)}),{})},_getBehaviorEvents:function(){var e=t.map(this._behaviors,(function(e){return e._getEvents()}));return t.reduce(e,(function(e,i){return t.extend(e,i)}),{})},_setBehaviorElements:function(){t.map(this._behaviors,(function(e){return e.setElement()}))},_delegateBehaviorEntityEvents:function(){t.map(this._behaviors,(function(e){return e.delegateEntityEvents()}))},_undelegateBehaviorEntityEvents:function(){t.map(this._behaviors,(function(e){return e.undelegateEntityEvents()}))},_destroyBehaviors:function(e){t.map(this._behaviors,(function(t){return t.destroy(e)}))},_removeBehavior:function(e){this._isDestroyed||(this.undelegate(".trig".concat(e.cid," .").concat(e.cid)),this._behaviors=t.without(this._behaviors,e))},_bindBehaviorUIElements:function(){t.map(this._behaviors,(function(e){return e.bindUIElements()}))},_unbindBehaviorUIElements:function(){t.map(this._behaviors,(function(e){return e.unbindUIElements()}))},_triggerEventOnBehaviors:function(e,i,n){t.map(this._behaviors,(function(t){return t.triggerMethod(e,i,n)}))}},ge={_delegateEntityEvents:function(e,i){e&&(this._modelEvents=t.result(this,"modelEvents"),this.bindEvents(e,this._modelEvents)),i&&(this._collectionEvents=t.result(this,"collectionEvents"),this.bindEvents(i,this._collectionEvents))},_undelegateEntityEvents:function(e,t){this._modelEvents&&(this.unbindEvents(e,this._modelEvents),delete this._modelEvents),this._collectionEvents&&(this.unbindEvents(t,this._collectionEvents),delete this._collectionEvents)},_deleteEntityEventHandlers:function(){delete this._modelEvents,delete this._collectionEvents}},me={_renderTemplate:function(e){var t=this.mixinTemplateContext(this.serializeData())||{},i=this._renderHtml(e,t);void 0!==i&&this.attachElContent(i)},getTemplate:function(){return this.template},mixinTemplateContext:function(e){var i=t.result(this,"templateContext");return i?e?t.extend({},e,i):i:e},serializeData:function(){return this.model?this.serializeModel():this.collection?{items:this.serializeCollection()}:void 0},serializeModel:function(){return this.model.attributes},serializeCollection:function(){return t.map(this.collection.models,(function(e){return e.attributes}))},_renderHtml:function(e,t){return e(t)},attachElContent:function(e){this.Dom.setContents(this.el,e)}},pe=function(e,i){return t.reduce(e,(function(e,t,n){return e[Ee(n,i)]=t,e}),{})},we=/@ui\.[a-zA-Z-_$0-9]*/g,Ee=function(e,t){return e.replace(we,(function(e){return t[e.slice(4)]}))},ye=function(e,i,n){return t.each(e,(function(s,r){if(t.isString(s))e[r]=Ee(s,i);else if(s){var o=s[n];t.isString(o)&&(s[n]=Ee(o,i))}})),e},be={normalizeUIKeys:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._getUIBindings();return pe(e,t)},normalizeUIString:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._getUIBindings();return Ee(e,t)},normalizeUIValues:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._getUIBindings();return ye(e,i,t)},_getUIBindings:function(){return t.result(this,"_uiBindings")||t.result(this,"ui")},_bindUIElements:function(){var e=this;if(this.ui){this._uiBindings||(this._uiBindings=this.ui);var i=t.result(this,"_uiBindings");this._ui={},t.each(i,(function(t,i){e._ui[i]=e.$(t)})),this.ui=this._ui}},_unbindUIElements:function(){var e=this;this.ui&&this._uiBindings&&(t.each(this.ui,(function(t,i){delete e.ui[i]})),this.ui=this._uiBindings,delete this._uiBindings,delete this._ui)},_getUI:function(e){return this._ui[e]}},Ve={childViewEventPrefix:!1,triggersStopPropagation:!0,triggersPreventDefault:!0,DEV_MODE:!1};function Ce(e){return!!Ve[e]}function Re(e){return this.prototype.EventDelegator=t.extend({},this.prototype.EventDelegator,e),this}var xe=/^(\S+)\s*(.*)$/;var Me={EventDelegator:{shouldCapture:function(e){return-1!==["focus","blur"].indexOf(e)},delegate:function(e){var t=e.eventName,i=e.selector,n=e.handler,s=e.events,r=e.rootEl,o=this.shouldCapture(t);if(i){var h=function(e){for(var t=e.target;t&&t!==r;t=t.parentNode)Element.prototype.matches.call(t,i)&&(e.delegateTarget=t,n(e))};return s.push({eventName:t,handler:h}),void Element.prototype.addEventListener.call(r,t,h,o)}s.push({eventName:t,handler:n}),Element.prototype.addEventListener.call(r,t,n,o)},undelegateAll:function(e){var i=this,n=e.events,s=e.rootEl;s&&(t.each(n,(function(e){var t=e.eventName,n=e.handler,r=i.shouldCapture(t);Element.prototype.removeEventListener.call(s,t,n,r)})),n.length=0)}},_initViewEvents:function(){this._domEvents=[]},_undelegateViewEvents:function(){this.EventDelegator.undelegateAll({events:this._domEvents,rootEl:this.el})},_delegateViewEvents:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this,t=this._getUIBindings();this._delegateEvents(t),this._delegateTriggers(t,e)},_delegateEvents:function(e){var i=this;this.events&&t.each(t.result(this,"events"),(function(n,s){t.isFunction(n)||(n=i[n]),n&&i._delegate(n.bind(i),i.normalizeUIString(s,e))}))},_delegateTriggers:function(e,i){var n=this;this.triggers&&t.each(t.result(this,"triggers"),(function(s,r){n._delegate(function(e,i){t.isString(i)&&(i={event:i});var n=i.event,s=!!i.preventDefault;Ce("triggersPreventDefault")&&(s=!1!==i.preventDefault);var r=!!i.stopPropagation;return Ce("triggersStopPropagation")&&(r=!1!==i.stopPropagation),function(t){s&&t.preventDefault(),r&&t.stopPropagation();for(var i=arguments.length,o=new Array(i>1?i-1:0),h=1;h<i;h++)o[h-1]=arguments[h];e.triggerMethod.apply(e,[n,e,t].concat(o))}}(i,s),n.normalizeUIString(r,e))}))},_delegate:function(e,t){var i=t.match(xe);this.EventDelegator.delegate({eventName:i[1],selector:i[2],handler:e,events:this._domEvents,rootEl:this.el})}};function De(e){return this.prototype.Dom=t.extend({},this.prototype.Dom,e),this}var Ie={createElement:function(e){return document.createElement(e)},createBuffer:function(){return document.createDocumentFragment()},getDocumentEl:function(e){return e.ownerDocument.documentElement},findEl:function(e,t){return e.querySelectorAll(t)},hasEl:function(e,t){return e.contains(t&&t.parentNode)},detachEl:function(e){e.parentNode&&e.parentNode.removeChild(e)},replaceEl:function(e,t){if(e!==t){var i=t.parentNode;i&&i.replaceChild(e,t)}},swapEl:function(e,t){if(e!==t){var i=e.parentNode,n=t.parentNode;if(i&&n){var s=e.nextSibling,r=t.nextSibling;i.insertBefore(t,s),n.insertBefore(e,r)}}},setContents:function(e,t){e.innerHTML=t},setAttributes:function(e,i){t.each(t.keys(i),(function(t){t in e?e[t]=i[t]:e.setAttribute(t,i[t])}))},appendContents:function(e,t){e.appendChild(t)},hasContents:function(e){return!!e&&e.hasChildNodes()},detachContents:function(e){e.textContent=""}},Be={tagName:"div",preinitialize:function(){},Dom:Ie,_getEl:function(){if(!this.el){var e=this.Dom.createElement(t.result(this,"tagName")),i=t.extend({},t.result(this,"attributes"));return this.id&&(i.id=t.result(this,"id")),this.className&&(i.class=t.result(this,"className")),this.Dom.setAttributes(e,i),e}return t.result(this,"el")},$:function(e){return this.Dom.findEl(this.el,e)},_isElAttached:function(){return!!this.el&&this.Dom.hasEl(this.Dom.getDocumentEl(this.el),this.el)},supportsRenderLifecycle:!0,supportsDestroyLifecycle:!0,_isDestroyed:!1,isDestroyed:function(){return!!this._isDestroyed},_isRendered:!1,isRendered:function(){return!!this._isRendered},_isAttached:!1,isAttached:function(){return!!this._isAttached},delegateEntityEvents:function(){return this._delegateEntityEvents(this.model,this.collection),this._delegateBehaviorEntityEvents(),this},undelegateEntityEvents:function(){return this._undelegateEntityEvents(this.model,this.collection),this._undelegateBehaviorEntityEvents(),this},destroy:function(e){if(this._isDestroyed||this._isDestroying)return this;this._isDestroying=!0;var t=this._isAttached&&!this._disableDetachEvents;return this.triggerMethod("before:destroy",this,e),t&&this.triggerMethod("before:detach",this),this.unbindUIElements(),this._undelegateViewEvents(),this.Dom.detachEl(this.el),t&&(this._isAttached=!1,this.triggerMethod("detach",this)),this._removeChildren(),this._isDestroyed=!0,this._isRendered=!1,this._destroyBehaviors(e),this._deleteEntityEventHandlers(),this.triggerMethod("destroy",this,e),this._triggerEventOnBehaviors("destroy",this,e),this.stopListening(),this},bindUIElements:function(){return this._bindUIElements(),this._bindBehaviorUIElements(),this},unbindUIElements:function(){return this._unbindUIElements(),this._unbindBehaviorUIElements(),this},getUI:function(e){return this._getUI(e)},_buildEventProxies:function(){this._childViewEvents=this.normalizeMethods(t.result(this,"childViewEvents")),this._childViewTriggers=t.result(this,"childViewTriggers"),this._eventPrefix=this._getEventPrefix()},_getEventPrefix:function(){var e=!!Ce("childViewEventPrefix")&&"childview",i=t.result(this,"childViewEventPrefix",e);return!1===i?i:i+":"},_proxyChildViewEvents:function(e){(this._childViewEvents||this._childViewTriggers||this._eventPrefix)&&this.listenTo(e,"all",this._childViewEventHandler)},_childViewEventHandler:function(e){for(var t=this._childViewEvents,i=arguments.length,n=new Array(i>1?i-1:0),s=1;s<i;s++)n[s-1]=arguments[s];t&&t[e]&&t[e].apply(this,n);var r=this._childViewTriggers;r&&r[e]&&this.triggerMethod.apply(this,[r[e]].concat(n)),this._eventPrefix&&this.triggerMethod.apply(this,[this._eventPrefix+e].concat(n))}};function Ae(e){e._isRendered||(e.supportsRenderLifecycle||e.triggerMethod("before:render",e),e.render(),e._isRendered=!0,e.supportsRenderLifecycle||e.triggerMethod("render",e))}function ke(e,t){if(e.destroy)return e._disableDetachEvents=t,void e.destroy();e.supportsDestroyLifecycle||e.triggerMethod("before:destroy",e);var i=e._isAttached&&!t;i&&e.triggerMethod("before:detach",e),e.remove(),i&&(e._isAttached=!1,e.triggerMethod("detach",e)),e._isDestroyed=!0,e.supportsDestroyLifecycle||e.triggerMethod("destroy",e)}t.extend(Be,_e,oe,ge,me,be,Me);var Oe="RegionError",Se=["allowMissingEl","parentEl","replaceElement"],Ue=function(e){this._setOptions(e,Se),this.cid=t.uniqueId(this.cidPrefix),this._initEl=this.el=this.getOption("el"),this.initialize.apply(this,arguments)};function Te(e,i){if(e instanceof Ue)return e;if(t.isString(e))return Le(i,{el:e});if(t.isFunction(e))return Le(i,{regionClass:e});if(t.isObject(e))return Le(i,e);throw new h({message:"Improper region configuration type.",url:"marionette.region.html#defining-regions"})}function Le(e,i){var n=t.extend({},e,i),s=n.regionClass;return delete n.regionClass,new s(n)}Ue.extend=n,Ue.setDomApi=De,t.extend(Ue.prototype,oe,{Dom:Ie,cidPrefix:"mnr",replaceElement:!1,_isReplaced:!1,_isSwappingView:!1,show:function(e,t){if(this._ensureElement(t)){if((e=this._getView(e,t))===this.currentView)return this;if(e._isShown)throw new h({name:Oe,message:"View is already shown in a Region or CollectionView",url:"marionette.region.html#showing-a-view"});return this._isSwappingView=!!this.currentView,this.triggerMethod("before:show",this,e,t),!this.currentView&&e._isAttached||this.empty(t),this._setupChildView(e),this.currentView=e,Ae(e),this._attachView(e,t),this.triggerMethod("show",this,e,t),this._isSwappingView=!1,this}},_setEl:function(e){if(t.isObject(e))this.el=e;else{if(!e)throw new h({name:Oe,message:'An "el" must be specified for a region.',url:"marionette.region.html#additional-options"});this.el=this.getEl(e)}},_setElement:function(e){if(e===this.el)return this;var t=this._isReplaced;if(this._restoreEl(),this._setEl(e),this.currentView){var i=this.currentView;t?this._replaceEl(i):this.attachHtml(i)}return this},_setupChildView:function(e){I(e),this._proxyChildViewEvents(e),e.on("destroy",this._empty,this)},_proxyChildViewEvents:function(e){var t=this._parentView;t&&t._proxyChildViewEvents(e)},_shouldDisableMonitoring:function(){return this._parentView&&!1===this._parentView.monitorViewEvents},_isElAttached:function(){return this.Dom.hasEl(this.Dom.getDocumentEl(this.el),this.el)},_attachView:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=i.replaceElement,s=!e._isAttached&&this._isElAttached()&&!this._shouldDisableMonitoring(),r=void 0===n?!!t.result(this,"replaceElement"):!!n;s&&e.triggerMethod("before:attach",e),r?this._replaceEl(e):this.attachHtml(e),s&&(e._isAttached=!0,e.triggerMethod("attach",e)),e._isShown=!0},_ensureElement:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._setEl(this.el),!this.el){var i=void 0===e.allowMissingEl?!!t.result(this,"allowMissingEl"):!!e.allowMissingEl;if(i)return!1;throw new h({name:Oe,message:'An "el" must exist in DOM for this region '.concat(this.cid),url:"marionette.region.html#additional-options"})}return!0},_getView:function(e){if(!e)throw new h({name:Oe,message:"The view passed is undefined and therefore invalid. You must pass a view instance to show.",url:"marionette.region.html#showing-a-view"});if(e._isDestroyed)throw new h({name:Oe,message:'View (cid: "'.concat(e.cid,'") has already been destroyed and cannot be used.'),url:"marionette.region.html#showing-a-view"});if(function(e){return e.render&&(e.destroy||e.remove)}(e))return e;var t=this._getViewOptions(e);return new ze(t)},_getViewOptions:function(e){if(t.isFunction(e))return{template:e};if(t.isObject(e))return e;return{template:function(){return e}}},getEl:function(e){var i=t.result(this,"parentEl");return this.Dom.findEl(i||document,e)[0]},_replaceEl:function(e){this._restoreEl(),e.on("before:destroy",this._restoreEl,this),this.Dom.replaceEl(e.el,this.el),this._isReplaced=!0},_restoreEl:function(){if(this._isReplaced){var e=this.currentView;e&&(this._detachView(e),this._isReplaced=!1)}},isReplaced:function(){return!!this._isReplaced},isSwappingView:function(){return!!this._isSwappingView},attachHtml:function(e){this.Dom.appendContents(this.el,e.el)},empty:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{allowMissingEl:!0},t=this.currentView;return t?(this._empty(t,!0),this):(this._ensureElement(e)&&this.detachHtml(),this)},_empty:function(e,t){e.off("destroy",this._empty,this),this.triggerMethod("before:empty",this,e),this._restoreEl(),delete this.currentView,e._isDestroyed||(t?this.removeView(e):this._detachView(e),e._isShown=!1,this._stopChildViewEvents(e)),this.triggerMethod("empty",this,e)},_stopChildViewEvents:function(e){this._parentView&&this._parentView.stopListening(e)},destroyView:function(e){return e._isDestroyed||ke(e,this._shouldDisableMonitoring()),e},removeView:function(e){this.destroyView(e)},detachView:function(){var e=this.currentView;if(e)return this._empty(e),e},_detachView:function(e){var t=e._isAttached&&!this._shouldDisableMonitoring(),i=this._isReplaced;t&&e.triggerMethod("before:detach",e),i?this.Dom.replaceEl(this.el,e.el):this.detachHtml(),t&&(e._isAttached=!1,e.triggerMethod("detach",e))},detachHtml:function(){this.Dom.detachContents(this.el)},hasView:function(){return!!this.currentView},reset:function(e){return this.empty(e),this.el=this._initEl,delete this.$el,this},_isDestroyed:!1,isDestroyed:function(){return this._isDestroyed},destroy:function(e){return this._isDestroyed||(this.triggerMethod("before:destroy",this,e),this._isDestroyed=!0,this.reset(e),this._name&&this._parentView._removeReferences(this._name),delete this._parentView,delete this._name,this.triggerMethod("destroy",this,e),this.stopListening()),this}});var qe={regionClass:Ue,_initRegions:function(){this.regions=this.regions||{},this._regions={},this.addRegions(t.result(this,"regions"))},_reInitRegions:function(){t.each(this._regions,(function(e){return e.reset()}))},addRegion:function(e,t){var i={};return i[e]=t,this.addRegions(i)[e]},addRegions:function(e){if(!t.isEmpty(e))return e=this.normalizeUIValues(e,"el"),this.regions=t.extend({},this.regions,e),this._addRegions(e)},_addRegions:function(e){var i=this,n={regionClass:this.regionClass,parentEl:t.partial(t.result,this,"el")};return t.reduce(e,(function(e,t,s){return e[s]=Te(t,n),i._addRegion(e[s],s),e}),{})},_addRegion:function(e,t){this.triggerMethod("before:add:region",this,t,e),e._parentView=this,e._name=t,this._regions[t]=e,this.triggerMethod("add:region",this,t,e)},removeRegion:function(e){var t=this._regions[e];return this._removeRegion(t,e),t},removeRegions:function(){var e=this._getRegions();return t.each(this._regions,this._removeRegion.bind(this)),e},_removeRegion:function(e,t){this.triggerMethod("before:remove:region",this,t,e),e.destroy(),this.triggerMethod("remove:region",this,t,e)},_removeReferences:function(e){delete this.regions[e],delete this._regions[e]},emptyRegions:function(){var e=this.getRegions();return t.each(e,(function(e){return e.empty()})),e},hasRegion:function(e){return!!this.getRegion(e)},getRegion:function(e){return this._isRendered||this.render(),this._regions[e]},_getRegions:function(){return t.clone(this._regions)},getRegions:function(){return this._isRendered||this.render(),this._getRegions()},showChildView:function(e,t,i){return this.getRegion(e).show(t,i),t},detachChildView:function(e){return this.getRegion(e).detachView()},getChildView:function(e){return this.getRegion(e).currentView}};function Pe(e){return this.prototype._renderHtml=e,this}var Ne=["attributes","behaviors","childViewEventPrefix","childViewEvents","childViewTriggers","className","collection","collectionEvents","el","events","id","model","modelEvents","regionClass","regions","tagName","template","templateContext","triggers","ui"];function je(e,t){return t.currentView&&e.push(t.currentView),e}var ze=function(e){this.cid=t.uniqueId(this.cidPrefix),this._setOptions(e,Ne),this.preinitialize.apply(this,arguments),this._initViewEvents(),this.setElement(this._getEl()),I(this),this._initBehaviors(),this._initRegions(),this._buildEventProxies(),this.initialize.apply(this,arguments),this.delegateEntityEvents(),this._triggerEventOnBehaviors("initialize",this,e)};t.extend(ze,{extend:n,setRenderer:Pe,setDomApi:De,setEventDelegator:Re}),t.extend(ze.prototype,Be,qe,{cidPrefix:"mnv",setElement:function(e){return this._undelegateViewEvents(),this.el=e,this._setBehaviorElements(),this._isRendered=this.Dom.hasContents(this.el),this._isAttached=this._isElAttached(),this._isRendered&&this.bindUIElements(),this._delegateViewEvents(),this},render:function(){var e=this.getTemplate();return!1===e||this._isDestroyed||(this.triggerMethod("before:render",this),this._isRendered&&this._reInitRegions(),this._renderTemplate(e),this.bindUIElements(),this._isRendered=!0,this.triggerMethod("render",this)),this},_removeChildren:function(){this.removeRegions()},_getImmediateChildren:function(){return t.reduce(this._regions,je,[])}});var Fe={forEach:t.forEach,each:t.each,map:t.map,find:t.find,detect:t.detect,filter:t.filter,select:t.select,reject:t.reject,every:t.every,all:t.all,some:t.some,any:t.any,include:t.include,contains:t.contains,invoke:t.invoke,toArray:t.toArray,first:t.first,initial:t.initial,rest:t.rest,last:t.last,without:t.without,isEmpty:t.isEmpty,pluck:t.pluck,reduce:t.reduce,partition:t.partition},He=function(){this._init()};function $e(e,t){return t.model&&t.model.get(e)}t.each(["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck","reduce","partition"],(function(e){He.prototype[e]=function(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return Fe[e].apply(Fe,[this._views].concat(i))}})),t.extend(He.prototype,{_init:function(){this._views=[],this._viewsByCid={},this._indexByModel={},this._updateLength()},_add:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._views.length;this._addViewIndexes(e),this._views.splice(t,0,e),this._updateLength()},_addViewIndexes:function(e){this._viewsByCid[e.cid]=e,e.model&&(this._indexByModel[e.model.cid]=e)},_sort:function(e,i){return"string"==typeof e?(e=t.partial($e,e),this._sortBy(e)):1===e.length?this._sortBy(e.bind(i)):this._views.sort(e.bind(i))},_sortBy:function(e){var i=t.sortBy(this._views,e);return this._set(i),i},_set:function(e,i){this._views.length=0,this._views.push.apply(this._views,e.slice(0)),i&&(this._viewsByCid={},this._indexByModel={},t.each(e,this._addViewIndexes.bind(this)),this._updateLength())},_swap:function(e,t){var i=this.findIndexByView(e),n=this.findIndexByView(t);if(-1!==i&&-1!==n){var s=this._views[i];this._views[i]=this._views[n],this._views[n]=s}},findByModel:function(e){return this.findByModelCid(e.cid)},findByModelCid:function(e){return this._indexByModel[e]},findByIndex:function(e){return this._views[e]},findIndexByView:function(e){return this._views.indexOf(e)},findByCid:function(e){return this._viewsByCid[e]},hasView:function(e){return!!this.findByCid(e.cid)},_remove:function(e){if(this._viewsByCid[e.cid]){e.model&&delete this._indexByModel[e.model.cid],delete this._viewsByCid[e.cid];var t=this.findIndexByView(e);this._views.splice(t,1),this._updateLength()}},_updateLength:function(){this.length=this._views.length}});var We="CollectionViewError",Ye=["attributes","behaviors","childView","childViewContainer","childViewEventPrefix","childViewEvents","childViewOptions","childViewTriggers","className","collection","collectionEvents","el","emptyView","emptyViewOptions","events","id","model","modelEvents","sortWithCollection","tagName","template","templateContext","triggers","ui","viewComparator","viewFilter"],Ke=function(e){this.cid=t.uniqueId(this.cidPrefix),this._setOptions(e,Ye),this.preinitialize.apply(this,arguments),this._initViewEvents(),this.setElement(this._getEl()),I(this),this._initChildViewStorage(),this._initBehaviors(),this._buildEventProxies(),this.getEmptyRegion(),this.initialize.apply(this,arguments),this.delegateEntityEvents(),this._triggerEventOnBehaviors("initialize",this,e)};t.extend(Ke,{extend:n,setRenderer:Pe,setDomApi:De,setEventDelegator:Re}),t.extend(Ke.prototype,Be,{cidPrefix:"mncv",sortWithCollection:!0,_initChildViewStorage:function(){this._children=new He,this.children=new He},getEmptyRegion:function(){var e=this.container||this.el;return this._emptyRegion&&!this._emptyRegion.isDestroyed()?(this._emptyRegion._setElement(e),this._emptyRegion):(this._emptyRegion=new Ue({el:e,replaceElement:!1}),this._emptyRegion._parentView=this,this._emptyRegion)},_initialEvents:function(){this._isRendered||this.listenTo(this.collection,{sort:this._onCollectionSort,reset:this._onCollectionReset,update:this._onCollectionUpdate})},_onCollectionSort:function(e,t){var i=t.add,n=t.merge,s=t.remove;this.sortWithCollection&&!1!==this.viewComparator&&(i||s||n||this.sort())},_onCollectionReset:function(){this._destroyChildren(),this._addChildModels(this.collection.models),this.sort()},_onCollectionUpdate:function(e,t){var i=t.changes,n=i.removed.length&&this._removeChildModels(i.removed);this._addedViews=i.added.length&&this._addChildModels(i.added),this._detachChildren(n),this.sort(),this._removeChildViews(n)},_removeChildModels:function(e){var i=this;return t.reduce(e,(function(e,t){var n=i._removeChildModel(t);return n&&e.push(n),e}),[])},_removeChildModel:function(e){var t=this._children.findByModel(e);return t&&this._removeChild(t),t},_removeChild:function(e){this.triggerMethod("before:remove:child",this,e),this.children._remove(e),this._children._remove(e),this.triggerMethod("remove:child",this,e)},_addChildModels:function(e){return t.map(e,this._addChildModel.bind(this))},_addChildModel:function(e){var t=this._createChildView(e);return this._addChild(t),t},_createChildView:function(e){var t=this._getChildView(e),i=this._getChildViewOptions(e);return this.buildChildView(e,t,i)},_addChild:function(e,t){this.triggerMethod("before:add:child",this,e),this._setupChildView(e),this._children._add(e,t),this.children._add(e,t),this.triggerMethod("add:child",this,e)},_getChildView:function(e){var t=this.childView;if(!t)throw new h({name:We,message:'A "childView" must be specified',url:"marionette.collectionview.html#collectionviews-childview"});if(!(t=this._getView(t,e)))throw new h({name:We,message:'"childView" must be a view class or a function that returns a view class',url:"marionette.collectionview.html#collectionviews-childview"});return t},_getView:function(e,i){return(n=e).prototype.render&&(n.prototype.destroy||n.prototype.remove)?e:t.isFunction(e)?e.call(this,i):void 0;var n},_getChildViewOptions:function(e){return t.isFunction(this.childViewOptions)?this.childViewOptions(e):this.childViewOptions},buildChildView:function(e,i,n){return new i(t.extend({model:e},n))},_setupChildView:function(e){I(e),e.on("destroy",this.removeChildView,this),this._proxyChildViewEvents(e)},_getImmediateChildren:function(){return this.children._views},setElement:function(e){return this._undelegateViewEvents(),this.el=e,this._setBehaviorElements(),this._isAttached=this._isElAttached(),this._delegateViewEvents(),this},render:function(){if(this._isDestroyed)return this;this.triggerMethod("before:render",this),this._destroyChildren(),this.collection&&(this._addChildModels(this.collection.models),this._initialEvents());var e=this.getTemplate();return e&&(this._renderTemplate(e),this.bindUIElements()),this._getChildViewContainer(),this.sort(),this._isRendered=!0,this.triggerMethod("render",this),this},_getChildViewContainer:function(){var e=t.result(this,"childViewContainer");if(this.container=e?this.$(e)[0]:this.el,!this.container)throw new h({name:We,message:'The specified "childViewContainer" was not found: '.concat(e),url:"marionette.collectionview.html#defining-the-childviewcontainer"})},sort:function(){return this._sortChildren(),this.filter(),this},_sortChildren:function(){if(this._children.length){var e=this.getComparator();e&&(delete this._addedViews,this.triggerMethod("before:sort",this),this._children._sort(e,this),this.triggerMethod("sort",this))}},setComparator:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.preventRender,n=this.viewComparator!==e,s=n&&!i;return this.viewComparator=e,s&&this.sort(),this},removeComparator:function(e){return this.setComparator(null,e)},getComparator:function(){return this.viewComparator?this.viewComparator:!(!this.sortWithCollection||!1===this.viewComparator||!this.collection)&&this._viewComparator},_viewComparator:function(e){return this.collection.indexOf(e.model)},filter:function(){return this._isDestroyed||(this._filterChildren(),this._renderChildren()),this},_filterChildren:function(){var e=this;if(this._children.length){var i=this._getFilter();if(i){delete this._addedViews,this.triggerMethod("before:filter",this);var n=[],s=[];t.each(this._children._views,(function(t,r,o){(i.call(e,t,r,o)?n:s).push(t)})),this._detachChildren(s),this.children._set(n,!0),this.triggerMethod("filter",this,n,s)}else{var r=this.children.length!==this._children.length;this.children._set(this._children._views,r)}}},_getFilter:function(){var e=this.getFilter();if(!e)return!1;if(t.isFunction(e))return e;if(t.isObject(e)){var i=t.matches(e);return function(e){return i(e.model&&e.model.attributes)}}if(t.isString(e))return function(t){return t.model&&t.model.get(e)};throw new h({name:We,message:'"viewFilter" must be a function, predicate object literal, a string indicating a model attribute, or falsy',url:"marionette.collectionview.html#defining-the-viewfilter"})},getFilter:function(){return this.viewFilter},setFilter:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.preventRender,n=this.viewFilter!==e,s=n&&!i;return this.viewFilter=e,s&&this.filter(),this},removeFilter:function(e){return this.setFilter(null,e)},_detachChildren:function(e){t.each(e,this._detachChildView.bind(this))},_detachChildView:function(e){var t=e._isAttached&&!1!==this.monitorViewEvents;t&&e.triggerMethod("before:detach",e),this.detachHtml(e),t&&(e._isAttached=!1,e.triggerMethod("detach",e)),e._isShown=!1},detachHtml:function(e){this.Dom.detachEl(e.el)},_renderChildren:function(){this._hasUnrenderedViews&&(delete this._addedViews,delete this._hasUnrenderedViews);var e=this._addedViews||this.children._views;if(this.triggerMethod("before:render:children",this,e),this.isEmpty())this._showEmptyView();else{this._destroyEmptyView();var t=this._getBuffer(e);this._attachChildren(t,e)}delete this._addedViews,this.triggerMethod("render:children",this,e)},_getBuffer:function(e){var i=this,n=this.Dom.createBuffer();return t.each(e,(function(e){Ae(e),e._isShown=!0,i.Dom.appendContents(n,e.el)})),n},_attachChildren:function(e,i){i=this._isAttached&&!1!==this.monitorViewEvents?i:[],t.each(i,(function(e){e._isAttached||e.triggerMethod("before:attach",e)})),this.attachHtml(e,this.container),t.each(i,(function(e){e._isAttached||(e._isAttached=!0,e.triggerMethod("attach",e))}))},attachHtml:function(e,t){this.Dom.appendContents(t,e)},isEmpty:function(){return!this.children.length},_showEmptyView:function(){var e=this._getEmptyView();if(e){var t=this._getEmptyViewOptions();this.getEmptyRegion().show(new e(t))}},_getEmptyView:function(){var e=this.emptyView;if(e)return this._getView(e)},_destroyEmptyView:function(){var e=this.getEmptyRegion();e.hasView()&&e.empty()},_getEmptyViewOptions:function(){var e=this.emptyViewOptions||this.childViewOptions;return t.isFunction(e)?e.call(this):e},swapChildViews:function(e,t){if(!this._children.hasView(e)||!this._children.hasView(t))throw new h({name:We,message:"Both views must be children of the collection view to swap.",url:"marionette.collectionview.html#swapping-child-views"});return this._children._swap(e,t),this.Dom.swapEl(e.el,t.el),this.children.hasView(e)!==this.children.hasView(t)?this.filter():this.children._swap(e,t),this},addChildView:function(e,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e||e._isDestroyed)return e;if(e._isShown)throw new h({name:We,message:"View is already shown in a Region or CollectionView",url:"marionette.region.html#showing-a-view"});if(t.isObject(i)&&(n=i),null!=n.index&&(i=n.index),this._isRendered||this.render(),this._addChild(e,i),n.preventRender)return this._hasUnrenderedViews=!0,e;var s=void 0!==i,r=!s||i>=this._children.length;return r&&!this._hasUnrenderedViews&&(this._addedViews=[e]),s?this._renderChildren():this.sort(),e},detachChildView:function(e){return this.removeChildView(e,{shouldDetach:!0}),e},removeChildView:function(e,t){return e?(this._removeChildView(e,t),this._removeChild(e),this.isEmpty()&&this._showEmptyView(),e):e},_removeChildViews:function(e){t.each(e,this._removeChildView.bind(this))},_removeChildView:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.shouldDetach;e.off("destroy",this.removeChildView,this),i?this._detachChildView(e):this._destroyChildView(e),this.stopListening(e)},_destroyChildView:function(e){e._isDestroyed||ke(e,!1===this.monitorViewEvents)},_removeChildren:function(){this._destroyChildren(),this.getEmptyRegion().destroy(),delete this._addedViews},_destroyChildren:function(){this._children.length&&(this.triggerMethod("before:destroy:children",this),!1===this.monitorViewEvents&&this.Dom.detachContents(this.el),this._removeChildViews(this._children._views),this._children._init(),this.children._init(),this.triggerMethod("destroy:children",this))}});var Ze=["collectionEvents","events","modelEvents","triggers","ui"],Ge=function(e,i){this.view=i,this._setOptions(e,Ze),this.cid=t.uniqueId(this.cidPrefix),this._initViewEvents(),this.setElement(),this.ui=t.extend({},t.result(this,"ui"),t.result(i,"ui")),this.listenTo(i,"all",this.triggerMethod),this.initialize.apply(this,arguments)};Ge.extend=n,t.extend(Ge.prototype,oe,ge,be,Me,{cidPrefix:"mnb",$:function(){return this.view.$.apply(this.view,arguments)},destroy:function(){return this._undelegateViewEvents(),this.stopListening(),this.view._removeBehavior(this),this._deleteEntityEventHandlers(),this},setElement:function(){return this._undelegateViewEvents(),this.el=this.view.el,this._delegateViewEvents(this.view),this},bindUIElements:function(){return this._bindUIElements(),this},unbindUIElements:function(){return this._unbindUIElements(),this},getUI:function(e){return this._getUI(e)},delegateEntityEvents:function(){return this._delegateEntityEvents(this.view.model,this.view.collection),this},undelegateEntityEvents:function(){return this._undelegateEntityEvents(this.view.model,this.view.collection),this}});var Je=["channelName","radioEvents","radioRequests","region","regionClass"],Qe=function(e){this._setOptions(e,Je),this.cid=t.uniqueId(this.cidPrefix),this._initRegion(),this._initRadio(),this.initialize.apply(this,arguments)};Qe.extend=n,t.extend(Qe.prototype,oe,he,ce,{cidPrefix:"mna",start:function(e){return this.triggerMethod("before:start",this,e),this.triggerMethod("start",this,e),this},regionClass:Ue,_initRegion:function(){var e=this.region;if(e){var t={regionClass:this.regionClass};this._region=Te(e,t)}},getRegion:function(){return this._region},showView:function(e){for(var t=this.getRegion(),i=arguments.length,n=new Array(i>1?i-1:0),s=1;s<i;s++)n[s-1]=arguments[s];return t.show.apply(t,[e].concat(n)),e},getView:function(){return this.getRegion().currentView}});var Xe=i(l),et=i(d),tt=i(u),it=i(f),nt=i(_),st=i(v),rt=i(r),ot=i(S);e.Application=Qe,e.Behavior=Ge,e.CollectionView=Ke,e.DomApi=Ie,e.Events=Q,e.MnObject=fe,e.Radio=de,e.Region=Ue,e.Requests=re,e.VERSION=s,e.View=ze,e.bindEvents=Xe,e.bindRequests=tt,e.extend=n,e.getOption=st,e.isEnabled=Ce,e.mergeOptions=nt,e.monitorViewEvents=I,e.normalizeMethods=rt,e.setDomApi=function(e){Ke.setDomApi(e),Ue.setDomApi(e),ze.setDomApi(e)},e.setEnabled=function(e,t){return Ve[e]=t},e.setEventDelegator=function(e){Ke.setEventDelegator(e),ze.setEventDelegator(e)},e.setRenderer=function(e){Ke.setRenderer(e),ze.setRenderer(e)},e.triggerMethod=ot,e.unbindEvents=et,e.unbindRequests=it,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=marionette.min.js.map
